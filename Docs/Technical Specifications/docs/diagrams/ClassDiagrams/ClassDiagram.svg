<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1272px" preserveAspectRatio="none" style="width:1650px;height:1272px;" version="1.1" viewBox="0 0 1650 1272" width="1650px" zoomAndPan="magnify"><defs><filter height="300%" id="f1hzfzidz6ziq9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4544bf05af30223886112ffd96a1865f]
cluster Moderator-Client--><polygon fill="#FFFFFF" filter="url(#f1hzfzidz6ziq9)" points="1174,6,1318,6,1325,28.2969,1633,28.2969,1633,1190.5,1174,1190.5,1174,6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1174" x2="1325" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="1178" y="20.9951">Moderator-Client</text><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><polygon fill="#FFFFFF" filter="url(#f1hzfzidz6ziq9)" points="16,213,73,213,80,235.2969,1150,235.2969,1150,1265.5,16,1265.5,16,213" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="80" y1="235.2969" y2="235.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="20" y="227.9951">Server</text><!--MD5=[b4e09d266be9964199f2622adcc056fa]
cluster Backend--><rect fill="#FFFFFF" filter="url(#f1hzfzidz6ziq9)" height="985.5" style="stroke: #000000; stroke-width: 1.5;" width="613" x="513" y="256"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="785.5" y="270.9951">Backend</text><!--MD5=[a8973b51fb403d164ccd98ec50a39132]
cluster PlayerAudience-Client--><rect fill="#FFFFFF" filter="url(#f1hzfzidz6ziq9)" height="195" style="stroke: #000000; stroke-width: 1.5;" width="449" x="40" y="701"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="176.5" y="715.9951">PlayerAudience-Client</text><!--MD5=[3eaf92687768346c8d614b6fd2c22fb9]
class StoryEvent--><rect codeLine="5" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="124.8281" id="StoryEvent" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="1284.5" y="41"/><ellipse cx="1366.25" cy="57" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1368.5938,52.6719 C1367.6563,52.2344 1367.0625,52.0938 1366.1875,52.0938 C1363.5625,52.0938 1361.5625,54.1719 1361.5625,56.8906 L1361.5625,58.0156 C1361.5625,60.5938 1363.6719,62.4844 1366.5625,62.4844 C1367.7813,62.4844 1368.9375,62.1875 1369.6875,61.6406 C1370.2656,61.2344 1370.5938,60.7813 1370.5938,60.3906 C1370.5938,59.9375 1370.2031,59.5469 1369.7344,59.5469 C1369.5156,59.5469 1369.3125,59.625 1369.125,59.8125 C1368.6719,60.2969 1368.6719,60.2969 1368.4844,60.3906 C1368.0625,60.6563 1367.375,60.7813 1366.6094,60.7813 C1364.5625,60.7813 1363.2656,59.6875 1363.2656,57.9844 L1363.2656,56.8906 C1363.2656,55.1094 1364.5156,53.7969 1366.25,53.7969 C1366.8281,53.7969 1367.4375,53.9531 1367.9063,54.2031 C1368.3906,54.4844 1368.5625,54.7031 1368.6563,55.1094 C1368.7188,55.5156 1368.75,55.6406 1368.8906,55.7656 C1369.0313,55.9063 1369.2656,56.0156 1369.4844,56.0156 C1369.75,56.0156 1370.0156,55.875 1370.1875,55.6563 C1370.2969,55.5 1370.3281,55.3125 1370.3281,54.8906 L1370.3281,53.4688 C1370.3281,53.0313 1370.3125,52.9063 1370.2188,52.75 C1370.0625,52.4844 1369.7813,52.3438 1369.4844,52.3438 C1369.1875,52.3438 1368.9844,52.4375 1368.7656,52.75 L1368.5938,52.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="1386.75" y="61.1543">StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1285.5" x2="1520.5" y1="73" y2="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="1290.5" y="87.2104">+eventId: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="1290.5" y="100.0151">+description: string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="1290.5" y="112.8198">+parent: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1290.5" y="125.6245">+children: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1285.5" x2="1520.5" y1="132.2188" y2="132.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="1290.5" y="146.4292">+StoryEvent(parent: StoryEvent, id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="1290.5" y="159.2339">+addChild(): void</text><!--MD5=[efd5ebcc74ce0165d13c1df9fdb2b1d2]
class StoryGraph--><rect codeLine="14" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="176.0469" id="StoryGraph" style="stroke: #A80036; stroke-width: 1.5;" width="322" x="1242" y="284.5"/><ellipse cx="1364.75" cy="300.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1367.0938,296.1719 C1366.1563,295.7344 1365.5625,295.5938 1364.6875,295.5938 C1362.0625,295.5938 1360.0625,297.6719 1360.0625,300.3906 L1360.0625,301.5156 C1360.0625,304.0938 1362.1719,305.9844 1365.0625,305.9844 C1366.2813,305.9844 1367.4375,305.6875 1368.1875,305.1406 C1368.7656,304.7344 1369.0938,304.2813 1369.0938,303.8906 C1369.0938,303.4375 1368.7031,303.0469 1368.2344,303.0469 C1368.0156,303.0469 1367.8125,303.125 1367.625,303.3125 C1367.1719,303.7969 1367.1719,303.7969 1366.9844,303.8906 C1366.5625,304.1563 1365.875,304.2813 1365.1094,304.2813 C1363.0625,304.2813 1361.7656,303.1875 1361.7656,301.4844 L1361.7656,300.3906 C1361.7656,298.6094 1363.0156,297.2969 1364.75,297.2969 C1365.3281,297.2969 1365.9375,297.4531 1366.4063,297.7031 C1366.8906,297.9844 1367.0625,298.2031 1367.1563,298.6094 C1367.2188,299.0156 1367.25,299.1406 1367.3906,299.2656 C1367.5313,299.4063 1367.7656,299.5156 1367.9844,299.5156 C1368.25,299.5156 1368.5156,299.375 1368.6875,299.1563 C1368.7969,299 1368.8281,298.8125 1368.8281,298.3906 L1368.8281,296.9688 C1368.8281,296.5313 1368.8125,296.4063 1368.7188,296.25 C1368.5625,295.9844 1368.2813,295.8438 1367.9844,295.8438 C1367.6875,295.8438 1367.4844,295.9375 1367.2656,296.25 L1367.0938,296.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="1385.25" y="304.6543">StoryGraph</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1243" x2="1563" y1="316.5" y2="316.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="1248" y="330.7104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="1248" y="343.5151">+character: Character</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="1248" y="356.3198">+root: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="1248" y="369.1245">+currentEvent: StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1243" x2="1563" y1="375.7188" y2="375.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="1248" y="389.9292">+StoryGraph(id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="1248" y="402.7339">+loadGraphFromFile(): Graph</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1248" y="415.5386">+saveGraphToFile(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="1248" y="428.3433">+getNextPossibleEvent(): StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="310" x="1248" y="441.1479">+setCurrentEvent(newCurrentEvent: StoryEvent): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="1248" y="453.9526">+getNextStoryEventById(id: int): StoryEvent</text><!--MD5=[42e1add689e888dd7b55d3ee3f1dd6d7]
class Skill--><rect codeLine="27" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="124.8281" id="Skill" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="1190" y="745.5"/><ellipse cx="1273.75" cy="761.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1276.0938,757.1719 C1275.1563,756.7344 1274.5625,756.5938 1273.6875,756.5938 C1271.0625,756.5938 1269.0625,758.6719 1269.0625,761.3906 L1269.0625,762.5156 C1269.0625,765.0938 1271.1719,766.9844 1274.0625,766.9844 C1275.2813,766.9844 1276.4375,766.6875 1277.1875,766.1406 C1277.7656,765.7344 1278.0938,765.2813 1278.0938,764.8906 C1278.0938,764.4375 1277.7031,764.0469 1277.2344,764.0469 C1277.0156,764.0469 1276.8125,764.125 1276.625,764.3125 C1276.1719,764.7969 1276.1719,764.7969 1275.9844,764.8906 C1275.5625,765.1563 1274.875,765.2813 1274.1094,765.2813 C1272.0625,765.2813 1270.7656,764.1875 1270.7656,762.4844 L1270.7656,761.3906 C1270.7656,759.6094 1272.0156,758.2969 1273.75,758.2969 C1274.3281,758.2969 1274.9375,758.4531 1275.4063,758.7031 C1275.8906,758.9844 1276.0625,759.2031 1276.1563,759.6094 C1276.2188,760.0156 1276.25,760.1406 1276.3906,760.2656 C1276.5313,760.4063 1276.7656,760.5156 1276.9844,760.5156 C1277.25,760.5156 1277.5156,760.375 1277.6875,760.1563 C1277.7969,760 1277.8281,759.8125 1277.8281,759.3906 L1277.8281,757.9688 C1277.8281,757.5313 1277.8125,757.4063 1277.7188,757.25 C1277.5625,756.9844 1277.2813,756.8438 1276.9844,756.8438 C1276.6875,756.8438 1276.4844,756.9375 1276.2656,757.25 L1276.0938,757.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="1294.25" y="765.6543">Skill</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1191" x2="1389" y1="777.5" y2="777.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="1196" y="791.7104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="1196" y="804.5151">+value: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="1196" y="817.3198">+description: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1191" x2="1389" y1="823.9141" y2="823.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="1196" y="838.1245">+Skill(id: int, val: int, desc: string)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="1196" y="850.9292">+setValue(val: int): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="1196" y="863.7339">+getValue(): int</text><!--MD5=[3eff9d4279c887ef9286477750bdaaff]
class Character--><rect codeLine="36" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="99.2188" id="Character" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1250.5" y="521.5"/><ellipse cx="1272.25" cy="537.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1274.5938,533.1719 C1273.6563,532.7344 1273.0625,532.5938 1272.1875,532.5938 C1269.5625,532.5938 1267.5625,534.6719 1267.5625,537.3906 L1267.5625,538.5156 C1267.5625,541.0938 1269.6719,542.9844 1272.5625,542.9844 C1273.7813,542.9844 1274.9375,542.6875 1275.6875,542.1406 C1276.2656,541.7344 1276.5938,541.2813 1276.5938,540.8906 C1276.5938,540.4375 1276.2031,540.0469 1275.7344,540.0469 C1275.5156,540.0469 1275.3125,540.125 1275.125,540.3125 C1274.6719,540.7969 1274.6719,540.7969 1274.4844,540.8906 C1274.0625,541.1563 1273.375,541.2813 1272.6094,541.2813 C1270.5625,541.2813 1269.2656,540.1875 1269.2656,538.4844 L1269.2656,537.3906 C1269.2656,535.6094 1270.5156,534.2969 1272.25,534.2969 C1272.8281,534.2969 1273.4375,534.4531 1273.9063,534.7031 C1274.3906,534.9844 1274.5625,535.2031 1274.6563,535.6094 C1274.7188,536.0156 1274.75,536.1406 1274.8906,536.2656 C1275.0313,536.4063 1275.2656,536.5156 1275.4844,536.5156 C1275.75,536.5156 1276.0156,536.375 1276.1875,536.1563 C1276.2969,536 1276.3281,535.8125 1276.3281,535.3906 L1276.3281,533.9688 C1276.3281,533.5313 1276.3125,533.4063 1276.2188,533.25 C1276.0625,532.9844 1275.7813,532.8438 1275.4844,532.8438 C1275.1875,532.8438 1274.9844,532.9375 1274.7656,533.25 L1274.5938,533.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="1287.75" y="541.6543">Character</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1251.5" x2="1354.5" y1="553.5" y2="553.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="1256.5" y="567.7104">+sprite: Texture</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1256.5" y="580.5151">+abilities: Skill[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="1256.5" y="593.3198">+name: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1251.5" x2="1354.5" y1="599.9141" y2="599.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1256.5" y="614.1245">+Character()</text><!--MD5=[bb849c1528464e2c6bbfb2687d0866b0]
class mf--><rect codeLine="43" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="99.2188" id="mf" style="stroke: #A80036; stroke-width: 1.5;" width="201" x="1409.5" y="521.5"/><ellipse cx="1459.75" cy="537.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1462.0938,533.1719 C1461.1563,532.7344 1460.5625,532.5938 1459.6875,532.5938 C1457.0625,532.5938 1455.0625,534.6719 1455.0625,537.3906 L1455.0625,538.5156 C1455.0625,541.0938 1457.1719,542.9844 1460.0625,542.9844 C1461.2813,542.9844 1462.4375,542.6875 1463.1875,542.1406 C1463.7656,541.7344 1464.0938,541.2813 1464.0938,540.8906 C1464.0938,540.4375 1463.7031,540.0469 1463.2344,540.0469 C1463.0156,540.0469 1462.8125,540.125 1462.625,540.3125 C1462.1719,540.7969 1462.1719,540.7969 1461.9844,540.8906 C1461.5625,541.1563 1460.875,541.2813 1460.1094,541.2813 C1458.0625,541.2813 1456.7656,540.1875 1456.7656,538.4844 L1456.7656,537.3906 C1456.7656,535.6094 1458.0156,534.2969 1459.75,534.2969 C1460.3281,534.2969 1460.9375,534.4531 1461.4063,534.7031 C1461.8906,534.9844 1462.0625,535.2031 1462.1563,535.6094 C1462.2188,536.0156 1462.25,536.1406 1462.3906,536.2656 C1462.5313,536.4063 1462.7656,536.5156 1462.9844,536.5156 C1463.25,536.5156 1463.5156,536.375 1463.6875,536.1563 C1463.7969,536 1463.8281,535.8125 1463.8281,535.3906 L1463.8281,533.9688 C1463.8281,533.5313 1463.8125,533.4063 1463.7188,533.25 C1463.5625,532.9844 1463.2813,532.8438 1462.9844,532.8438 C1462.6875,532.8438 1462.4844,532.9375 1462.2656,533.25 L1462.0938,533.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="1480.25" y="541.6543">ModeratorView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1410.5" x2="1609.5" y1="553.5" y2="553.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1415.5" y="567.7104">+timeoutDuration: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1410.5" x2="1609.5" y1="574.3047" y2="574.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="1415.5" y="588.5151">+ModeratorView()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1415.5" y="601.3198">+pausePolling(val: boolean): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1415.5" y="614.1245">+offlineMode(val: boolean): void</text><!--MD5=[9105e509a9f69a1dfba1c0054edeb4e1]
class pe--><rect codeLine="50" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="150.4375" id="pe" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="1425" y="733"/><ellipse cx="1479.25" cy="749" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1481.5938,744.6719 C1480.6563,744.2344 1480.0625,744.0938 1479.1875,744.0938 C1476.5625,744.0938 1474.5625,746.1719 1474.5625,748.8906 L1474.5625,750.0156 C1474.5625,752.5938 1476.6719,754.4844 1479.5625,754.4844 C1480.7813,754.4844 1481.9375,754.1875 1482.6875,753.6406 C1483.2656,753.2344 1483.5938,752.7813 1483.5938,752.3906 C1483.5938,751.9375 1483.2031,751.5469 1482.7344,751.5469 C1482.5156,751.5469 1482.3125,751.625 1482.125,751.8125 C1481.6719,752.2969 1481.6719,752.2969 1481.4844,752.3906 C1481.0625,752.6563 1480.375,752.7813 1479.6094,752.7813 C1477.5625,752.7813 1476.2656,751.6875 1476.2656,749.9844 L1476.2656,748.8906 C1476.2656,747.1094 1477.5156,745.7969 1479.25,745.7969 C1479.8281,745.7969 1480.4375,745.9531 1480.9063,746.2031 C1481.3906,746.4844 1481.5625,746.7031 1481.6563,747.1094 C1481.7188,747.5156 1481.75,747.6406 1481.8906,747.7656 C1482.0313,747.9063 1482.2656,748.0156 1482.4844,748.0156 C1482.75,748.0156 1483.0156,747.875 1483.1875,747.6563 C1483.2969,747.5 1483.3281,747.3125 1483.3281,746.8906 L1483.3281,745.4688 C1483.3281,745.0313 1483.3125,744.9063 1483.2188,744.75 C1483.0625,744.4844 1482.7813,744.3438 1482.4844,744.3438 C1482.1875,744.3438 1481.9844,744.4375 1481.7656,744.75 L1481.5938,744.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="1499.75" y="753.1543">PollEvaluator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1426" x2="1616" y1="765" y2="765"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="1431" y="779.2104">possibleDecisions: StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="1431" y="792.0151">timeout: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="1431" y="804.8198">voteCounter: int[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1426" x2="1616" y1="811.4141" y2="811.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1431" y="825.6245">+PollEvaluator()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="1431" y="838.4292">+checkServerStatus(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="1431" y="851.2339">+broadcastNextDecision(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1431" y="864.0386">+evaluateVotes(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="1431" y="876.8433">+addVote(): void</text><!--MD5=[aef0d3d3c8a893455b9107cd4a3b357c]
class mcei--><rect codeLine="62" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="112.0234" id="mcei" style="stroke: #A80036; stroke-width: 1.5;" width="276" x="1238" y="1062.5"/><ellipse cx="1294.75" cy="1078.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1297.0938,1074.1719 C1296.1563,1073.7344 1295.5625,1073.5938 1294.6875,1073.5938 C1292.0625,1073.5938 1290.0625,1075.6719 1290.0625,1078.3906 L1290.0625,1079.5156 C1290.0625,1082.0938 1292.1719,1083.9844 1295.0625,1083.9844 C1296.2813,1083.9844 1297.4375,1083.6875 1298.1875,1083.1406 C1298.7656,1082.7344 1299.0938,1082.2813 1299.0938,1081.8906 C1299.0938,1081.4375 1298.7031,1081.0469 1298.2344,1081.0469 C1298.0156,1081.0469 1297.8125,1081.125 1297.625,1081.3125 C1297.1719,1081.7969 1297.1719,1081.7969 1296.9844,1081.8906 C1296.5625,1082.1563 1295.875,1082.2813 1295.1094,1082.2813 C1293.0625,1082.2813 1291.7656,1081.1875 1291.7656,1079.4844 L1291.7656,1078.3906 C1291.7656,1076.6094 1293.0156,1075.2969 1294.75,1075.2969 C1295.3281,1075.2969 1295.9375,1075.4531 1296.4063,1075.7031 C1296.8906,1075.9844 1297.0625,1076.2031 1297.1563,1076.6094 C1297.2188,1077.0156 1297.25,1077.1406 1297.3906,1077.2656 C1297.5313,1077.4063 1297.7656,1077.5156 1297.9844,1077.5156 C1298.25,1077.5156 1298.5156,1077.375 1298.6875,1077.1563 C1298.7969,1077 1298.8281,1076.8125 1298.8281,1076.3906 L1298.8281,1074.9688 C1298.8281,1074.5313 1298.8125,1074.4063 1298.7188,1074.25 C1298.5625,1073.9844 1298.2813,1073.8438 1297.9844,1073.8438 C1297.6875,1073.8438 1297.4844,1073.9375 1297.2656,1074.25 L1297.0938,1074.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="1315.25" y="1082.6543">ModeratorClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1239" x2="1513" y1="1094.5" y2="1094.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1244" y="1108.7104">+websocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="264" x="1244" y="1121.5151">+authentificationTokenModeratorClient: Token</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1239" x2="1513" y1="1128.1094" y2="1128.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="1244" y="1142.3198">+ModeratorClientExchange()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1244" y="1155.1245">+getCurrentPollEval(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="1244" y="1167.9292">+makeJSON(): string</text><!--MD5=[1e281070be324fe4119de6bf55ec0dae]
class api--><rect codeLine="79" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="137.6328" id="api" style="stroke: #A80036; stroke-width: 1.5;" width="358" x="136" y="1049.5"/><ellipse cx="302.25" cy="1065.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M304.5938,1061.1719 C303.6563,1060.7344 303.0625,1060.5938 302.1875,1060.5938 C299.5625,1060.5938 297.5625,1062.6719 297.5625,1065.3906 L297.5625,1066.5156 C297.5625,1069.0938 299.6719,1070.9844 302.5625,1070.9844 C303.7813,1070.9844 304.9375,1070.6875 305.6875,1070.1406 C306.2656,1069.7344 306.5938,1069.2813 306.5938,1068.8906 C306.5938,1068.4375 306.2031,1068.0469 305.7344,1068.0469 C305.5156,1068.0469 305.3125,1068.125 305.125,1068.3125 C304.6719,1068.7969 304.6719,1068.7969 304.4844,1068.8906 C304.0625,1069.1563 303.375,1069.2813 302.6094,1069.2813 C300.5625,1069.2813 299.2656,1068.1875 299.2656,1066.4844 L299.2656,1065.3906 C299.2656,1063.6094 300.5156,1062.2969 302.25,1062.2969 C302.8281,1062.2969 303.4375,1062.4531 303.9063,1062.7031 C304.3906,1062.9844 304.5625,1063.2031 304.6563,1063.6094 C304.7188,1064.0156 304.75,1064.1406 304.8906,1064.2656 C305.0313,1064.4063 305.2656,1064.5156 305.4844,1064.5156 C305.75,1064.5156 306.0156,1064.375 306.1875,1064.1563 C306.2969,1064 306.3281,1063.8125 306.3281,1063.3906 L306.3281,1061.9688 C306.3281,1061.5313 306.3125,1061.4063 306.2188,1061.25 C306.0625,1060.9844 305.7813,1060.8438 305.4844,1060.8438 C305.1875,1060.8438 304.9844,1060.9375 304.7656,1061.25 L304.5938,1061.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="322.75" y="1069.6543">API</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="137" x2="493" y1="1081.5" y2="1081.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="142" y="1095.7104">+observerCollection: Observer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="137" x2="493" y1="1102.3047" y2="1102.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="142" y="1116.5151">+API()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="346" x="142" y="1129.3198">+registerObserver(observer: Observer, cookie: Cookie): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="270" x="142" y="1142.1245">+unregisterObserver(observer: Observer): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="142" y="1154.9292">+notifyObservers(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="142" y="1167.7339">+updatePossibleDecisions(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="142" y="1180.5386">+collectVotes(): void</text><!--MD5=[6bfcf15cc25972516e1f43cee16dbcb3]
class ss--><rect codeLine="90" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="252.875" id="ss" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="645" y="681.5"/><ellipse cx="727.75" cy="697.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M730.0938,693.1719 C729.1563,692.7344 728.5625,692.5938 727.6875,692.5938 C725.0625,692.5938 723.0625,694.6719 723.0625,697.3906 L723.0625,698.5156 C723.0625,701.0938 725.1719,702.9844 728.0625,702.9844 C729.2813,702.9844 730.4375,702.6875 731.1875,702.1406 C731.7656,701.7344 732.0938,701.2813 732.0938,700.8906 C732.0938,700.4375 731.7031,700.0469 731.2344,700.0469 C731.0156,700.0469 730.8125,700.125 730.625,700.3125 C730.1719,700.7969 730.1719,700.7969 729.9844,700.8906 C729.5625,701.1563 728.875,701.2813 728.1094,701.2813 C726.0625,701.2813 724.7656,700.1875 724.7656,698.4844 L724.7656,697.3906 C724.7656,695.6094 726.0156,694.2969 727.75,694.2969 C728.3281,694.2969 728.9375,694.4531 729.4063,694.7031 C729.8906,694.9844 730.0625,695.2031 730.1563,695.6094 C730.2188,696.0156 730.25,696.1406 730.3906,696.2656 C730.5313,696.4063 730.7656,696.5156 730.9844,696.5156 C731.25,696.5156 731.5156,696.375 731.6875,696.1563 C731.7969,696 731.8281,695.8125 731.8281,695.3906 L731.8281,693.9688 C731.8281,693.5313 731.8125,693.4063 731.7188,693.25 C731.5625,692.9844 731.2813,692.8438 730.9844,692.8438 C730.6875,692.8438 730.4844,692.9375 730.2656,693.25 L730.0938,693.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="748.25" y="701.6543">ServerShell</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="646" x2="888" y1="713.5" y2="713.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="651" y="727.7104">+logger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="651" y="740.5151">+port: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="651" y="753.3198">+runShell: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="651" y="766.1245">+serverShell: ServerShell</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="651" y="778.9292">+capacity: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="651" y="791.7339">+bufferedReader: BufferedReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="646" x2="888" y1="798.3281" y2="798.3281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="651" y="812.5386">+ServerShell()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="651" y="825.3433">+startShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="651" y="838.1479">+stopShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="651" y="850.9526">+parseCommand(command: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="651" y="863.7573">+showHelp(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="651" y="876.562">+configPort(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="651" y="889.3667">+configCapacity(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="651" y="902.1714">+startServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="651" y="914.9761">+stopServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="651" y="927.7808">+main(args: string[]): void</text><!--MD5=[952aa88079c2ad50e6f0d17205c717c0]
class cm--><rect codeLine="109" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="214.4609" id="cm" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="816" y="1011.5"/><ellipse cx="884.75" cy="1027.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M887.0938,1023.1719 C886.1563,1022.7344 885.5625,1022.5938 884.6875,1022.5938 C882.0625,1022.5938 880.0625,1024.6719 880.0625,1027.3906 L880.0625,1028.5156 C880.0625,1031.0938 882.1719,1032.9844 885.0625,1032.9844 C886.2813,1032.9844 887.4375,1032.6875 888.1875,1032.1406 C888.7656,1031.7344 889.0938,1031.2813 889.0938,1030.8906 C889.0938,1030.4375 888.7031,1030.0469 888.2344,1030.0469 C888.0156,1030.0469 887.8125,1030.125 887.625,1030.3125 C887.1719,1030.7969 887.1719,1030.7969 886.9844,1030.8906 C886.5625,1031.1563 885.875,1031.2813 885.1094,1031.2813 C883.0625,1031.2813 881.7656,1030.1875 881.7656,1028.4844 L881.7656,1027.3906 C881.7656,1025.6094 883.0156,1024.2969 884.75,1024.2969 C885.3281,1024.2969 885.9375,1024.4531 886.4063,1024.7031 C886.8906,1024.9844 887.0625,1025.2031 887.1563,1025.6094 C887.2188,1026.0156 887.25,1026.1406 887.3906,1026.2656 C887.5313,1026.4063 887.7656,1026.5156 887.9844,1026.5156 C888.25,1026.5156 888.5156,1026.375 888.6875,1026.1563 C888.7969,1026 888.8281,1025.8125 888.8281,1025.3906 L888.8281,1023.9688 C888.8281,1023.5313 888.8125,1023.4063 888.7188,1023.25 C888.5625,1022.9844 888.2813,1022.8438 887.9844,1022.8438 C887.6875,1022.8438 887.4844,1022.9375 887.2656,1023.25 L887.0938,1023.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="905.25" y="1031.6543">ModeratorClientManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="817" x2="1109" y1="1043.5" y2="1043.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="822" y="1057.7104">+webSocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="822" y="1070.5151">+ip: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="822" y="1083.3198">+port: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="822" y="1096.1245">+logger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="264" x="822" y="1108.9292">+authentificationTokenModeratorClient: Token</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="817" x2="1109" y1="1115.5234" y2="1115.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="822" y="1129.7339">+ModeratorClientManager(session: Session): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="822" y="1142.5386">+disconnect(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="822" y="1155.3433">+onDisconnect(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="822" y="1168.1479">+recieve(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="822" y="1180.9526">+checkJSON(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="822" y="1193.7573">+sendMessage(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="822" y="1206.562">+send(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="822" y="1219.3667">+recieve(message: string): void</text><!--MD5=[380687b934d22663c3818bb6fe2c579f]
class msl--><rect codeLine="125" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="112.0234" id="msl" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="529" y="1062.5"/><ellipse cx="600.75" cy="1078.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603.0938,1074.1719 C602.1563,1073.7344 601.5625,1073.5938 600.6875,1073.5938 C598.0625,1073.5938 596.0625,1075.6719 596.0625,1078.3906 L596.0625,1079.5156 C596.0625,1082.0938 598.1719,1083.9844 601.0625,1083.9844 C602.2813,1083.9844 603.4375,1083.6875 604.1875,1083.1406 C604.7656,1082.7344 605.0938,1082.2813 605.0938,1081.8906 C605.0938,1081.4375 604.7031,1081.0469 604.2344,1081.0469 C604.0156,1081.0469 603.8125,1081.125 603.625,1081.3125 C603.1719,1081.7969 603.1719,1081.7969 602.9844,1081.8906 C602.5625,1082.1563 601.875,1082.2813 601.1094,1082.2813 C599.0625,1082.2813 597.7656,1081.1875 597.7656,1079.4844 L597.7656,1078.3906 C597.7656,1076.6094 599.0156,1075.2969 600.75,1075.2969 C601.3281,1075.2969 601.9375,1075.4531 602.4063,1075.7031 C602.8906,1075.9844 603.0625,1076.2031 603.1563,1076.6094 C603.2188,1077.0156 603.25,1077.1406 603.3906,1077.2656 C603.5313,1077.4063 603.7656,1077.5156 603.9844,1077.5156 C604.25,1077.5156 604.5156,1077.375 604.6875,1077.1563 C604.7969,1077 604.8281,1076.8125 604.8281,1076.3906 L604.8281,1074.9688 C604.8281,1074.5313 604.8125,1074.4063 604.7188,1074.25 C604.5625,1073.9844 604.2813,1073.8438 603.9844,1073.8438 C603.6875,1073.8438 603.4844,1073.9375 603.2656,1074.25 L603.0938,1074.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="621.25" y="1082.6543">MainServerLogic</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="780" y1="1094.5" y2="1094.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="535" y="1108.7104">+moderator: WebClient</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="535" y="1121.5151">+logger: Logger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="780" y1="1128.1094" y2="1128.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="535" y="1142.3198">MainServerLogic(capacity: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="535" y="1155.1245">+onFalseMessage(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="535" y="1167.9292">+onVotingMessage(message: string): void</text><!--MD5=[e5ed2fcbff96bd03a55f8cf01186b818]
class sl--><rect codeLine="134" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="163.2422" id="sl" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="607" y="291"/><ellipse cx="676.75" cy="307" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M679.0938,302.6719 C678.1563,302.2344 677.5625,302.0938 676.6875,302.0938 C674.0625,302.0938 672.0625,304.1719 672.0625,306.8906 L672.0625,308.0156 C672.0625,310.5938 674.1719,312.4844 677.0625,312.4844 C678.2813,312.4844 679.4375,312.1875 680.1875,311.6406 C680.7656,311.2344 681.0938,310.7813 681.0938,310.3906 C681.0938,309.9375 680.7031,309.5469 680.2344,309.5469 C680.0156,309.5469 679.8125,309.625 679.625,309.8125 C679.1719,310.2969 679.1719,310.2969 678.9844,310.3906 C678.5625,310.6563 677.875,310.7813 677.1094,310.7813 C675.0625,310.7813 673.7656,309.6875 673.7656,307.9844 L673.7656,306.8906 C673.7656,305.1094 675.0156,303.7969 676.75,303.7969 C677.3281,303.7969 677.9375,303.9531 678.4063,304.2031 C678.8906,304.4844 679.0625,304.7031 679.1563,305.1094 C679.2188,305.5156 679.25,305.6406 679.3906,305.7656 C679.5313,305.9063 679.7656,306.0156 679.9844,306.0156 C680.25,306.0156 680.5156,305.875 680.6875,305.6563 C680.7969,305.5 680.8281,305.3125 680.8281,304.8906 L680.8281,303.4688 C680.8281,303.0313 680.8125,302.9063 680.7188,302.75 C680.5625,302.4844 680.2813,302.3438 679.9844,302.3438 C679.6875,302.3438 679.4844,302.4375 679.2656,302.75 L679.0938,302.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="697.25" y="311.1543">ServerLogger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="608" x2="838" y1="323" y2="323"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="613" y="337.2104">+globalLogger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="613" y="350.0151">+logFile: FileHandler</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="613" y="362.8198">+isSetup: Boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="613" y="375.6245">+consoleHandler: Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="608" x2="838" y1="382.2188" y2="382.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="613" y="396.4292">+Logger()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="613" y="409.2339">+setup(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="613" y="422.0386">+addHandler(logger: Logger): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="613" y="434.8433">+setLevel(level: int): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="613" y="447.6479">+setConsoleOutput(val: boolean): void</text><!--MD5=[e590bdab9987379c47d474280840512e]
class pace--><rect codeLine="147" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="143.5703" id="pace" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="56" y="736"/><ellipse cx="76.85" cy="754.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M79.1938,750.6406 C78.2563,750.2031 77.6625,750.0625 76.7875,750.0625 C74.1625,750.0625 72.1625,752.1406 72.1625,754.8594 L72.1625,755.9844 C72.1625,758.5625 74.2719,760.4531 77.1625,760.4531 C78.3813,760.4531 79.5375,760.1563 80.2875,759.6094 C80.8656,759.2031 81.1938,758.75 81.1938,758.3594 C81.1938,757.9063 80.8031,757.5156 80.3344,757.5156 C80.1156,757.5156 79.9125,757.5938 79.725,757.7813 C79.2719,758.2656 79.2719,758.2656 79.0844,758.3594 C78.6625,758.625 77.975,758.75 77.2094,758.75 C75.1625,758.75 73.8656,757.6563 73.8656,755.9531 L73.8656,754.8594 C73.8656,753.0781 75.1156,751.7656 76.85,751.7656 C77.4281,751.7656 78.0375,751.9219 78.5063,752.1719 C78.9906,752.4531 79.1625,752.6719 79.2563,753.0781 C79.3188,753.4844 79.35,753.6094 79.4906,753.7344 C79.6313,753.875 79.8656,753.9844 80.0844,753.9844 C80.35,753.9844 80.6156,753.8438 80.7875,753.625 C80.8969,753.4688 80.9281,753.2813 80.9281,752.8594 L80.9281,751.4375 C80.9281,751 80.9125,750.875 80.8188,750.7188 C80.6625,750.4531 80.3813,750.3125 80.0844,750.3125 C79.7875,750.3125 79.5844,750.4063 79.3656,750.7188 L79.1938,750.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="68" x="149.65" y="752.1387">«Observer»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="92.15" y="766.1074">PlayerAudienceClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="773.9375" y2="773.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="62" y="788.1479">+sessionCookie: Cookie</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="62" y="800.9526">+hasVoted: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="62" y="813.7573">+selectedDecision: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="62" y="826.562">+possibleDecisions: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="833.1563" y2="833.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="62" y="847.3667">+PlayerAudienceClientExchange()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="62" y="860.1714">+update(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="216" x="62" y="872.9761">+sendSelectedDecision(): StoryEvent</text><!--MD5=[046b75ba0a1981da758680c895f9ffd8]
class pav--><rect codeLine="157" fill="#FEFECE" filter="url(#f1hzfzidz6ziq9)" height="60.8047" id="pav" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="319.5" y="777.5"/><ellipse cx="334.5" cy="793.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336.8438,789.1719 C335.9063,788.7344 335.3125,788.5938 334.4375,788.5938 C331.8125,788.5938 329.8125,790.6719 329.8125,793.3906 L329.8125,794.5156 C329.8125,797.0938 331.9219,798.9844 334.8125,798.9844 C336.0313,798.9844 337.1875,798.6875 337.9375,798.1406 C338.5156,797.7344 338.8438,797.2813 338.8438,796.8906 C338.8438,796.4375 338.4531,796.0469 337.9844,796.0469 C337.7656,796.0469 337.5625,796.125 337.375,796.3125 C336.9219,796.7969 336.9219,796.7969 336.7344,796.8906 C336.3125,797.1563 335.625,797.2813 334.8594,797.2813 C332.8125,797.2813 331.5156,796.1875 331.5156,794.4844 L331.5156,793.3906 C331.5156,791.6094 332.7656,790.2969 334.5,790.2969 C335.0781,790.2969 335.6875,790.4531 336.1563,790.7031 C336.6406,790.9844 336.8125,791.2031 336.9063,791.6094 C336.9688,792.0156 337,792.1406 337.1406,792.2656 C337.2813,792.4063 337.5156,792.5156 337.7344,792.5156 C338,792.5156 338.2656,792.375 338.4375,792.1563 C338.5469,792 338.5781,791.8125 338.5781,791.3906 L338.5781,789.9688 C338.5781,789.5313 338.5625,789.4063 338.4688,789.25 C338.3125,788.9844 338.0313,788.8438 337.7344,788.8438 C337.4375,788.8438 337.2344,788.9375 337.0156,789.25 L336.8438,789.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="348.5" y="797.6543">PlayerAudienceView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="809.5" y2="809.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="817.5" y2="817.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="325.5" y="831.7104">+PlayerAudienceView()</text><!--MD5=[513d28559cb9b2f986fa50a4c3eda83f]
link StoryEvent to StoryGraph--><path codeLine="70" d="M1403,166.09 C1403,197.23 1403,235.8 1403,271.08 " fill="none" id="StoryEvent-to-StoryGraph" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1403,284.423,1407,278.423,1403,272.423,1399,278.423,1403,284.423" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1394.5625" y="185.8397">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1394.6688" y="273.5752">1</text><!--MD5=[c53e1f9c02f78d6f6c6c47087547b478]
link StoryGraph to mf--><path codeLine="71" d="M1450.4,460.546 C1461.75,481.385 1473.47,502.906 1483.48,521.291 " fill="none" id="StoryGraph-mf" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f80b4c689c2fbad67007e34e43864d26]
link StoryGraph to Character--><path codeLine="72" d="M1358.7,460.546 C1348.1,481.385 1337.14,502.906 1327.79,521.291 " fill="none" id="StoryGraph-Character" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b16aa1dee279ab3d1d003602504b70d]
reverse link Character to Skill--><path codeLine="73" d="M1299.57,633.921 C1297.67,668.333 1295.31,711.009 1293.41,745.374 " fill="none" id="Character-backto-Skill" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1300.31,620.692,1295.9843,626.4616,1299.6463,632.6736,1303.972,626.9041,1300.31,620.692" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1291.3692" y="640.7955">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1285.3418" y="734.3502">n</text><!--MD5=[d29554897930022c58dd8210ad447ef6]
link mf to pe--><path codeLine="74" d="M1512.28,620.692 C1513.8,653.092 1515.82,696.269 1517.53,732.899 " fill="none" id="mf-pe" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aec115d956d7b212d45293ef7ee64686]
link pe to mcei--><path codeLine="75" d="M1486.08,883.286 C1460.19,938.378 1425.46,1012.28 1401.98,1062.222 " fill="none" id="pe-mcei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a0d3bbc68f741b6e52f50e6f2273a72d]
link ss to msl--><path codeLine="161" d="M721.284,934.924 C705.194,979.242 687.932,1026.79 675.058,1062.25 " fill="none" id="ss-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7d06e1ba490a93264d4a8b472a43ae41]
link msl to cm--><path codeLine="162" d="M781.027,1118.5 C792.638,1118.5 804.248,1118.5 815.858,1118.5 " fill="none" id="msl-cm" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[507f6a785ef230083e89882233c22fea]
link api to msl--><path codeLine="163" d="M494.297,1118.5 C505.806,1118.5 517.314,1118.5 528.823,1118.5 " fill="none" id="api-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[671dab341200759546ed8586cdbf8a87]
link sl to cm--><path codeLine="164" d="M783.471,454.262 C824.912,513.903 877.379,598.766 906,681.5 C943.499,789.896 956.615,921.242 961.053,1011.259 " fill="none" id="sl-cm" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[a5942343fc64a8361275d61bf78cabe0]
link sl to msl--><path codeLine="165" d="M690.445,454.271 C667.596,515.494 639.054,602.319 627,681.5 C610.077,792.664 618.472,822.379 627,934.5 C630.291,977.765 637.897,1026.289 644.353,1062.495 " fill="none" id="sl-msl" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[17eb025897342361bd851f93fa477fff]
link sl to api--><path codeLine="166" d="M668.938,454.305 C655.888,475.645 642.651,499.01 632,521.5 C548.858,697.054 589.993,768.572 489,934.5 C463.358,976.63 426.65,1017.072 393.554,1049.174 " fill="none" id="sl-api" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[ce7bcfb77770f94a81831b8f23590dae]
link sl to ss--><path codeLine="167" d="M731.173,454.022 C737.647,517.806 746.808,608.059 754.245,681.335 " fill="none" id="sl-ss" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[da9abd1873f207cba4baaf944fa348f2]
link pace to pav--><path codeLine="168" d="M284.324,808 C295.957,808 307.59,808 319.223,808 " fill="none" id="pace-pav" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[96167f1f5e43b9ebcc14970849e1c19e]
link pace to api--><path codeLine="169" d="M203.448,880.163 C226.621,929.465 257.38,994.908 280.729,1044.586 " fill="none" id="pace-to-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="282.965,1049.343,282.7555,1039.4964,280.8376,1044.8182,275.5158,1042.9002,282.965,1049.343" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="248" y="977.5669">observes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="198.1627" y="899.5998">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="271.2489" y="1038.5304">1</text><!--MD5=[58a85bdb989a432d30a1624e5616c617]
link mcei to cm--><path codeLine="172" d="M1237.91,1118.5 C1195.35,1118.5 1152.78,1118.5 1110.21,1118.5 " fill="none" id="mcei-cm" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9e4fd686a8feb3ccf6e4dd711cbd418f]
@startuml
skinparam classAttributeIconSize 0

package "Moderator-Client" {

  class StoryEvent {
    {field} +eventId: int
    {field} +description: string
    {field} +parent: StoryEvent
    {field} +children: StoryEvent[]
    {method} +StoryEvent(parent: StoryEvent, id: int)
    {method} +addChild(): void
  }

  class StoryGraph {
    {field} +id: int
    {field} +character: Character
    {field} +root: StoryEvent
    {field} +currentEvent: StoryEvent
    {method} +StoryGraph(id: int)
    {method} +loadGraphFromFile(): Graph
    {method} +saveGraphToFile(): void
    {method} +getNextPossibleEvent(): StoryEvent[]
    {method} +setCurrentEvent(newCurrentEvent: StoryEvent): void
    {method} +getNextStoryEventById(id: int): StoryEvent
  }

  class Skill {
    {field} +id: int
    {field} +value: int
    {field} +description: string
    {method} + Skill(id: int, val: int, desc: string)
    {method} + setValue(val: int): void
    {method} + getValue(): int
  }

  class Character {
    {field} +sprite: Texture
    {field} +abilities: Skill[]
    {field} +name: string
    {method} +Character()
  }

  class "ModeratorView" as mf {
    {field} +timeoutDuration: int
    {method} +ModeratorView()
    {method} +pausePolling(val: boolean): void
    {method} +offlineMode(val: boolean): void
  }

  class "PollEvaluator" as pe {

    {field} possibleDecisions: StoryEvent[]
    {field} timeout: int
    {field} voteCounter: int[]
    {method} +PollEvaluator()
    {method} +checkServerStatus(): void
    {method} +broadcastNextDecision(): void
    {method} +evaluateVotes(): int
    {method} +addVote(): void
  }

  class "ModeratorClientExchange" as mcei{
    {field} +websocket: WebSocket
    {field} +authentificationTokenModeratorClient: Token
    {method} +ModeratorClientExchange()
    {method} +getCurrentPollEval(): int
    {method} +makeJSON(): string
  }
  
  StoryEvent "n" - -* "1" StoryGraph
  StoryGraph - - mf
  StoryGraph - - Character
  Character "1" *- - "n" Skill
  mf - - pe
  pe - - mcei
}

package "Server" {
   class "API" as api {
        {field} +observerCollection: Observer
        {method} +API()
        {method} +registerObserver(observer: Observer, cookie: Cookie): void
        {method} +unregisterObserver(observer: Observer): void
        {method} +notifyObservers(): void
        {method} +updatePossibleDecisions(): void
        {method} +collectVotes(): void
  }

  package "Backend" <<Rectangle>>{
    class "ServerShell" as ss {
      {field} +logger: Logger
      {field} +port: int
      {field} +runShell: boolean
      {field} +serverShell: ServerShell
      {field} +capacity: int
      {field} +bufferedReader: BufferedReader
      {method} +ServerShell()
      {method} +startShell(): void
      {method} +stopShell(): void
      {method} +parseCommand(command: string): void
      {method} +showHelp(): void
      {method} +configPort(): void
      {method} +configCapacity(): void
      {method} +startServer(): void
      {method} +stopServer(): void
      {method} +main(args: string[]): void
    }

    class "ModeratorClientManager" as cm {
      {field} +webSocket: WebSocket
      {field} +ip: int
      {field} +port: int
      {field} +logger: Logger
      {field} +authentificationTokenModeratorClient: Token
      {method} +ModeratorClientManager(session: Session): void
      {method} +disconnect(): void
      {method} +onDisconnect(): void
      {method} +recieve(message: string): void
      {method} +checkJSON(message: string): void
      {method} +sendMessage(message: string): void
      {method} +send(message: string): void
      {method} +recieve(message: string): void
    }    

    class "MainServerLogic" as msl {
      {field} +moderator: WebClient
      {field} +logger: Logger
      {method} MainServerLogic(capacity: int, port: int)
      {method} +onFalseMessage(message: string): void
      {method} +onVotingMessage(message: string): void

    }

    class "ServerLogger" as sl {
      {field} +globalLogger: Logger
      {field} +logFile: FileHandler
      {field} +isSetup: Boolean
      {field} +consoleHandler: Handler
      {method} +Logger()
      {method} +setup(): void
      {method} +addHandler(logger: Logger): void
      {method} +setLevel(level: int): void
      {method} +setConsoleOutput(val: boolean): void
    }
  }
  package "PlayerAudience-Client" <<Rectangle>>{  
    class "PlayerAudienceClientExchange" as pace <<Observer>>{
      {field} +sessionCookie: Cookie
      {field} +hasVoted: boolean
      {field} +selectedDecision: StoryEvent
      {field} +possibleDecisions: StoryEvent[]
      {method} +PlayerAudienceClientExchange()
      {method} +update(): void
      {method} +sendSelectedDecision(): StoryEvent 
    }

    class "PlayerAudienceView" as pav {
      {method} +PlayerAudienceView()
    }
  }
  ss - - msl
  msl - cm
  msl -left- api
  sl ... cm
  sl ... msl
  sl ... api
  sl ... ss
  pace - pav
  api "1" <-up- "n" pace : observes
}

mcei - cm
@enduml

PlantUML version 1.2020.20beta11(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>