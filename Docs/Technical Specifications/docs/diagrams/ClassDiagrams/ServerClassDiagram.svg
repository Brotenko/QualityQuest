<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="923px" preserveAspectRatio="none" style="width:1402px;height:923px;" version="1.1" viewBox="0 0 1402 923" width="1402px" zoomAndPan="magnify"><defs><filter height="300%" id="fa6048z3xzxyz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b7afd9f15f1d1e83dce14c212cc841e0]
cluster ServerApplication--><polygon fill="#FFFFFF" filter="url(#fa6048z3xzxyz)" points="16,6,166,6,173,28.2969,1385,28.2969,1385,916,16,916,16,6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="173" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="20" y="20.9951">ServerApplication</text><!--MD5=[bec4376398c619d3cc65439ee33bd7ca]
cluster ServerLogic--><rect fill="#FFFFFF" filter="url(#fa6048z3xzxyz)" height="843" style="stroke: #000000; stroke-width: 1.5;" width="848" x="513" y="49"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="890" y="63.9951">ServerLogic</text><!--MD5=[a8973b51fb403d164ccd98ec50a39132]
cluster PlayerAudience-Client--><rect fill="#FFFFFF" filter="url(#fa6048z3xzxyz)" height="195" style="stroke: #000000; stroke-width: 1.5;" width="449" x="40" y="383"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="176.5" y="397.9951">PlayerAudience-Client</text><!--MD5=[1e281070be324fe4119de6bf55ec0dae]
class api--><rect codeLine="4" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="150.4375" id="api" style="stroke: #A80036; stroke-width: 1.5;" width="368" x="126" y="706.5"/><ellipse cx="297.25" cy="722.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M299.5938,718.1719 C298.6563,717.7344 298.0625,717.5938 297.1875,717.5938 C294.5625,717.5938 292.5625,719.6719 292.5625,722.3906 L292.5625,723.5156 C292.5625,726.0938 294.6719,727.9844 297.5625,727.9844 C298.7813,727.9844 299.9375,727.6875 300.6875,727.1406 C301.2656,726.7344 301.5938,726.2813 301.5938,725.8906 C301.5938,725.4375 301.2031,725.0469 300.7344,725.0469 C300.5156,725.0469 300.3125,725.125 300.125,725.3125 C299.6719,725.7969 299.6719,725.7969 299.4844,725.8906 C299.0625,726.1563 298.375,726.2813 297.6094,726.2813 C295.5625,726.2813 294.2656,725.1875 294.2656,723.4844 L294.2656,722.3906 C294.2656,720.6094 295.5156,719.2969 297.25,719.2969 C297.8281,719.2969 298.4375,719.4531 298.9063,719.7031 C299.3906,719.9844 299.5625,720.2031 299.6563,720.6094 C299.7188,721.0156 299.75,721.1406 299.8906,721.2656 C300.0313,721.4063 300.2656,721.5156 300.4844,721.5156 C300.75,721.5156 301.0156,721.375 301.1875,721.1563 C301.2969,721 301.3281,720.8125 301.3281,720.3906 L301.3281,718.9688 C301.3281,718.5313 301.3125,718.4063 301.2188,718.25 C301.0625,717.9844 300.7813,717.8438 300.4844,717.8438 C300.1875,717.8438 299.9844,717.9375 299.7656,718.25 L299.5938,718.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="317.75" y="726.6543">API</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="493" y1="738.5" y2="738.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="238" x="132" y="752.7104">-observerCollection: ArrayList&lt;Observer&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="493" y1="759.3047" y2="759.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="132" y="773.5151">+API()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="356" x="132" y="786.3198">+subscribeObserver(observer: Observer, cookie: Cookie): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="280" x="132" y="799.1245">+unsubscribeObserver(observer: Observer): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="132" y="811.9292">+notifyObservers(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="132" y="824.7339">+updatePossibleDecisions(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="132" y="837.5386">+collectVotes(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="132" y="850.3433">+getVotes():</text><!--MD5=[6bfcf15cc25972516e1f43cee16dbcb3]
class ss--><rect codeLine="16" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="240.0703" id="ss" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="880" y="370"/><ellipse cx="962.75" cy="386" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M965.0938,381.6719 C964.1563,381.2344 963.5625,381.0938 962.6875,381.0938 C960.0625,381.0938 958.0625,383.1719 958.0625,385.8906 L958.0625,387.0156 C958.0625,389.5938 960.1719,391.4844 963.0625,391.4844 C964.2813,391.4844 965.4375,391.1875 966.1875,390.6406 C966.7656,390.2344 967.0938,389.7813 967.0938,389.3906 C967.0938,388.9375 966.7031,388.5469 966.2344,388.5469 C966.0156,388.5469 965.8125,388.625 965.625,388.8125 C965.1719,389.2969 965.1719,389.2969 964.9844,389.3906 C964.5625,389.6563 963.875,389.7813 963.1094,389.7813 C961.0625,389.7813 959.7656,388.6875 959.7656,386.9844 L959.7656,385.8906 C959.7656,384.1094 961.0156,382.7969 962.75,382.7969 C963.3281,382.7969 963.9375,382.9531 964.4063,383.2031 C964.8906,383.4844 965.0625,383.7031 965.1563,384.1094 C965.2188,384.5156 965.25,384.6406 965.3906,384.7656 C965.5313,384.9063 965.7656,385.0156 965.9844,385.0156 C966.25,385.0156 966.5156,384.875 966.6875,384.6563 C966.7969,384.5 966.8281,384.3125 966.8281,383.8906 L966.8281,382.4688 C966.8281,382.0313 966.8125,381.9063 966.7188,381.75 C966.5625,381.4844 966.2813,381.3438 965.9844,381.3438 C965.6875,381.3438 965.4844,381.4375 965.2656,381.75 L965.0938,381.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="983.25" y="390.1543">ServerShell</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1123" y1="402" y2="402"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="886" y="416.2104">+logger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="886" y="429.0151">-port: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="886" y="441.8198">-runShell: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="886" y="454.6245">-serverShell: ServerShell</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="886" y="467.4292">-bufferedReader: BufferedReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1123" y1="474.0234" y2="474.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="886" y="488.2339">+ServerShell()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="886" y="501.0386">+startShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="886" y="513.8433">+stopShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="886" y="526.6479">+parseCommand(command: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="886" y="539.4526">+showHelp(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="886" y="552.2573">+configPort(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="886" y="565.062">+configCapacity(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="886" y="577.8667">+startServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="886" y="590.6714">+stopServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="886" y="603.4761">+main(args: string[]): void</text><!--MD5=[952aa88079c2ad50e6f0d17205c717c0]
class cm--><rect codeLine="34" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="188.8516" id="cm" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="1051" y="687"/><ellipse cx="1119.75" cy="703" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1122.0938,698.6719 C1121.1563,698.2344 1120.5625,698.0938 1119.6875,698.0938 C1117.0625,698.0938 1115.0625,700.1719 1115.0625,702.8906 L1115.0625,704.0156 C1115.0625,706.5938 1117.1719,708.4844 1120.0625,708.4844 C1121.2813,708.4844 1122.4375,708.1875 1123.1875,707.6406 C1123.7656,707.2344 1124.0938,706.7813 1124.0938,706.3906 C1124.0938,705.9375 1123.7031,705.5469 1123.2344,705.5469 C1123.0156,705.5469 1122.8125,705.625 1122.625,705.8125 C1122.1719,706.2969 1122.1719,706.2969 1121.9844,706.3906 C1121.5625,706.6563 1120.875,706.7813 1120.1094,706.7813 C1118.0625,706.7813 1116.7656,705.6875 1116.7656,703.9844 L1116.7656,702.8906 C1116.7656,701.1094 1118.0156,699.7969 1119.75,699.7969 C1120.3281,699.7969 1120.9375,699.9531 1121.4063,700.2031 C1121.8906,700.4844 1122.0625,700.7031 1122.1563,701.1094 C1122.2188,701.5156 1122.25,701.6406 1122.3906,701.7656 C1122.5313,701.9063 1122.7656,702.0156 1122.9844,702.0156 C1123.25,702.0156 1123.5156,701.875 1123.6875,701.6563 C1123.7969,701.5 1123.8281,701.3125 1123.8281,700.8906 L1123.8281,699.4688 C1123.8281,699.0313 1123.8125,698.9063 1123.7188,698.75 C1123.5625,698.4844 1123.2813,698.3438 1122.9844,698.3438 C1122.6875,698.3438 1122.4844,698.4375 1122.2656,698.75 L1122.0938,698.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="1140.25" y="707.1543">ModeratorClientManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1052" x2="1344" y1="719" y2="719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="1057" y="733.2104">-webSocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="1057" y="746.0151">-ip: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="1057" y="758.8198">-port: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1057" y="771.6245">+logger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="1057" y="784.4292">-authentificationTokenModeratorClientHash: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1052" x2="1344" y1="791.0234" y2="791.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="1057" y="805.2339">+ModeratorClientManager(session: Session): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="1057" y="818.0386">+disconnect(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="1057" y="830.8433">+recieveMessage(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="1057" y="843.6479">+checkJSON(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1057" y="856.4526">+sendMessage(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="1057" y="869.2573">+evalJSON(): string</text><!--MD5=[380687b934d22663c3818bb6fe2c579f]
class msl--><rect codeLine="49" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="112.0234" id="msl" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="764" y="725.5"/><ellipse cx="835.75" cy="741.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M838.0938,737.1719 C837.1563,736.7344 836.5625,736.5938 835.6875,736.5938 C833.0625,736.5938 831.0625,738.6719 831.0625,741.3906 L831.0625,742.5156 C831.0625,745.0938 833.1719,746.9844 836.0625,746.9844 C837.2813,746.9844 838.4375,746.6875 839.1875,746.1406 C839.7656,745.7344 840.0938,745.2813 840.0938,744.8906 C840.0938,744.4375 839.7031,744.0469 839.2344,744.0469 C839.0156,744.0469 838.8125,744.125 838.625,744.3125 C838.1719,744.7969 838.1719,744.7969 837.9844,744.8906 C837.5625,745.1563 836.875,745.2813 836.1094,745.2813 C834.0625,745.2813 832.7656,744.1875 832.7656,742.4844 L832.7656,741.3906 C832.7656,739.6094 834.0156,738.2969 835.75,738.2969 C836.3281,738.2969 836.9375,738.4531 837.4063,738.7031 C837.8906,738.9844 838.0625,739.2031 838.1563,739.6094 C838.2188,740.0156 838.25,740.1406 838.3906,740.2656 C838.5313,740.4063 838.7656,740.5156 838.9844,740.5156 C839.25,740.5156 839.5156,740.375 839.6875,740.1563 C839.7969,740 839.8281,739.8125 839.8281,739.3906 L839.8281,737.9688 C839.8281,737.5313 839.8125,737.4063 839.7188,737.25 C839.5625,736.9844 839.2813,736.8438 838.9844,736.8438 C838.6875,736.8438 838.4844,736.9375 838.2656,737.25 L838.0938,737.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="856.25" y="745.6543">MainServerLogic</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="765" x2="1015" y1="757.5" y2="757.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="770" y="771.7104">-moderator: WebClient</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="770" y="784.5151">+logger: Logger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="765" x2="1015" y1="791.1094" y2="791.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="229" x="770" y="805.3198">+MainServerLogic(capacity: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="770" y="818.1245">+onFalseMessage(message: string): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="770" y="830.9292">+onVotingMessage(message: string): void</text><!--MD5=[9105e509a9f69a1dfba1c0054edeb4e1]
class pe--><rect codeLine="58" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="124.8281" id="pe" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="529" y="719"/><ellipse cx="587.25" cy="735" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M589.5938,730.6719 C588.6563,730.2344 588.0625,730.0938 587.1875,730.0938 C584.5625,730.0938 582.5625,732.1719 582.5625,734.8906 L582.5625,736.0156 C582.5625,738.5938 584.6719,740.4844 587.5625,740.4844 C588.7813,740.4844 589.9375,740.1875 590.6875,739.6406 C591.2656,739.2344 591.5938,738.7813 591.5938,738.3906 C591.5938,737.9375 591.2031,737.5469 590.7344,737.5469 C590.5156,737.5469 590.3125,737.625 590.125,737.8125 C589.6719,738.2969 589.6719,738.2969 589.4844,738.3906 C589.0625,738.6563 588.375,738.7813 587.6094,738.7813 C585.5625,738.7813 584.2656,737.6875 584.2656,735.9844 L584.2656,734.8906 C584.2656,733.1094 585.5156,731.7969 587.25,731.7969 C587.8281,731.7969 588.4375,731.9531 588.9063,732.2031 C589.3906,732.4844 589.5625,732.7031 589.6563,733.1094 C589.7188,733.5156 589.75,733.6406 589.8906,733.7656 C590.0313,733.9063 590.2656,734.0156 590.4844,734.0156 C590.75,734.0156 591.0156,733.875 591.1875,733.6563 C591.2969,733.5 591.3281,733.3125 591.3281,732.8906 L591.3281,731.4688 C591.3281,731.0313 591.3125,730.9063 591.2188,730.75 C591.0625,730.4844 590.7813,730.3438 590.4844,730.3438 C590.1875,730.3438 589.9844,730.4375 589.7656,730.75 L589.5938,730.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="607.75" y="739.1543">PollEvaluator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="728" y1="751" y2="751"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="535" y="765.2104">-possibleDecisions: StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="535" y="778.0151">-voteCounter: Dictionary&lt;int,int&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="535" y="790.8198">-api: API</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="728" y1="797.4141" y2="797.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="535" y="811.6245">+PollEvaluator()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="535" y="824.4292">+evaluateVotes(ids: int[]): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="535" y="837.2339">+addVote(id: int): void</text><!--MD5=[e5ed2fcbff96bd03a55f8cf01186b818]
class sl--><rect codeLine="67" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="163.2422" id="sl" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="777" y="84"/><ellipse cx="846.75" cy="100" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M849.0938,95.6719 C848.1563,95.2344 847.5625,95.0938 846.6875,95.0938 C844.0625,95.0938 842.0625,97.1719 842.0625,99.8906 L842.0625,101.0156 C842.0625,103.5938 844.1719,105.4844 847.0625,105.4844 C848.2813,105.4844 849.4375,105.1875 850.1875,104.6406 C850.7656,104.2344 851.0938,103.7813 851.0938,103.3906 C851.0938,102.9375 850.7031,102.5469 850.2344,102.5469 C850.0156,102.5469 849.8125,102.625 849.625,102.8125 C849.1719,103.2969 849.1719,103.2969 848.9844,103.3906 C848.5625,103.6563 847.875,103.7813 847.1094,103.7813 C845.0625,103.7813 843.7656,102.6875 843.7656,100.9844 L843.7656,99.8906 C843.7656,98.1094 845.0156,96.7969 846.75,96.7969 C847.3281,96.7969 847.9375,96.9531 848.4063,97.2031 C848.8906,97.4844 849.0625,97.7031 849.1563,98.1094 C849.2188,98.5156 849.25,98.6406 849.3906,98.7656 C849.5313,98.9063 849.7656,99.0156 849.9844,99.0156 C850.25,99.0156 850.5156,98.875 850.6875,98.6563 C850.7969,98.5 850.8281,98.3125 850.8281,97.8906 L850.8281,96.4688 C850.8281,96.0313 850.8125,95.9063 850.7188,95.75 C850.5625,95.4844 850.2813,95.3438 849.9844,95.3438 C849.6875,95.3438 849.4844,95.4375 849.2656,95.75 L849.0938,95.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="867.25" y="104.1543">ServerLogger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="778" x2="1008" y1="116" y2="116"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="783" y="130.2104">+globalLogger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="783" y="143.0151">+logFile: FileHandler</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="783" y="155.8198">+isSetup: Boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="783" y="168.6245">+consoleHandler: Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="778" x2="1008" y1="175.2188" y2="175.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="783" y="189.4292">+Logger()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="783" y="202.2339">+setup(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="783" y="215.0386">+addHandler(logger: Logger): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="783" y="227.8433">+setLevel(level: int): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="783" y="240.6479">+setConsoleOutput(val: boolean): void</text><!--MD5=[e590bdab9987379c47d474280840512e]
class pace--><rect codeLine="80" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="143.5703" id="pace" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="56" y="418"/><ellipse cx="76.85" cy="436.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M79.1938,432.6406 C78.2563,432.2031 77.6625,432.0625 76.7875,432.0625 C74.1625,432.0625 72.1625,434.1406 72.1625,436.8594 L72.1625,437.9844 C72.1625,440.5625 74.2719,442.4531 77.1625,442.4531 C78.3813,442.4531 79.5375,442.1563 80.2875,441.6094 C80.8656,441.2031 81.1938,440.75 81.1938,440.3594 C81.1938,439.9063 80.8031,439.5156 80.3344,439.5156 C80.1156,439.5156 79.9125,439.5938 79.725,439.7813 C79.2719,440.2656 79.2719,440.2656 79.0844,440.3594 C78.6625,440.625 77.975,440.75 77.2094,440.75 C75.1625,440.75 73.8656,439.6563 73.8656,437.9531 L73.8656,436.8594 C73.8656,435.0781 75.1156,433.7656 76.85,433.7656 C77.4281,433.7656 78.0375,433.9219 78.5063,434.1719 C78.9906,434.4531 79.1625,434.6719 79.2563,435.0781 C79.3188,435.4844 79.35,435.6094 79.4906,435.7344 C79.6313,435.875 79.8656,435.9844 80.0844,435.9844 C80.35,435.9844 80.6156,435.8438 80.7875,435.625 C80.8969,435.4688 80.9281,435.2813 80.9281,434.8594 L80.9281,433.4375 C80.9281,433 80.9125,432.875 80.8188,432.7188 C80.6625,432.4531 80.3813,432.3125 80.0844,432.3125 C79.7875,432.3125 79.5844,432.4063 79.3656,432.7188 L79.1938,432.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="68" x="149.65" y="434.1387">«Observer»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="92.15" y="448.1074">PlayerAudienceClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="455.9375" y2="455.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="62" y="470.1479">-sessionCookie: Cookie</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="62" y="482.9526">-hasVoted: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="62" y="495.7573">-selectedDecision: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="62" y="508.562">-possibleDecisions: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="515.1563" y2="515.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="62" y="529.3667">+PlayerAudienceClientExchange()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="62" y="542.1714">+update(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="216" x="62" y="554.9761">+sendSelectedDecision(): StoryEvent</text><!--MD5=[046b75ba0a1981da758680c895f9ffd8]
class pav--><rect codeLine="90" fill="#FEFECE" filter="url(#fa6048z3xzxyz)" height="60.8047" id="pav" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="319.5" y="459.5"/><ellipse cx="334.5" cy="475.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336.8438,471.1719 C335.9063,470.7344 335.3125,470.5938 334.4375,470.5938 C331.8125,470.5938 329.8125,472.6719 329.8125,475.3906 L329.8125,476.5156 C329.8125,479.0938 331.9219,480.9844 334.8125,480.9844 C336.0313,480.9844 337.1875,480.6875 337.9375,480.1406 C338.5156,479.7344 338.8438,479.2813 338.8438,478.8906 C338.8438,478.4375 338.4531,478.0469 337.9844,478.0469 C337.7656,478.0469 337.5625,478.125 337.375,478.3125 C336.9219,478.7969 336.9219,478.7969 336.7344,478.8906 C336.3125,479.1563 335.625,479.2813 334.8594,479.2813 C332.8125,479.2813 331.5156,478.1875 331.5156,476.4844 L331.5156,475.3906 C331.5156,473.6094 332.7656,472.2969 334.5,472.2969 C335.0781,472.2969 335.6875,472.4531 336.1563,472.7031 C336.6406,472.9844 336.8125,473.2031 336.9063,473.6094 C336.9688,474.0156 337,474.1406 337.1406,474.2656 C337.2813,474.4063 337.5156,474.5156 337.7344,474.5156 C338,474.5156 338.2656,474.375 338.4375,474.1563 C338.5469,474 338.5781,473.8125 338.5781,473.3906 L338.5781,471.9688 C338.5781,471.5313 338.5625,471.4063 338.4688,471.25 C338.3125,470.9844 338.0313,470.8438 337.7344,470.8438 C337.4375,470.8438 337.2344,470.9375 337.0156,471.25 L336.8438,471.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="348.5" y="479.6543">PlayerAudienceView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="491.5" y2="491.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="499.5" y2="499.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="325.5" y="513.7104">+PlayerAudienceView()</text><!--MD5=[a0d3bbc68f741b6e52f50e6f2273a72d]
link ss to msl--><path codeLine="94" d="M955.96,610.004 C940.515,649.928 924.025,692.552 911.396,725.195 " fill="none" id="ss-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7d06e1ba490a93264d4a8b472a43ae41]
link msl to cm--><path codeLine="95" d="M1016.03,781.5 C1027.64,781.5 1039.25,781.5 1050.86,781.5 " fill="none" id="msl-cm" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0dc7f4e939c057bb258d4c5f70365db7]
link pe to msl--><path codeLine="96" d="M729.169,781.5 C740.687,781.5 752.205,781.5 763.722,781.5 " fill="none" id="pe-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[64320bcde71beffb940e18b354ba01b3]
link api to pe--><path codeLine="97" d="M494.11,781.5 C505.702,781.5 517.295,781.5 528.887,781.5 " fill="none" id="api-pe" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[671dab341200759546ed8586cdbf8a87]
link sl to cm--><path codeLine="98" d="M1009.13,233.622 C1058.12,268.044 1110.9,314.472 1142,370 C1196.92,468.052 1205.66,599.335 1204.14,686.756 " fill="none" id="sl-cm" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[a5942343fc64a8361275d61bf78cabe0]
link sl to msl--><path codeLine="99" d="M878.296,247.399 C872.251,284.602 865.977,329.398 863,370 C855.201,476.381 854.632,503.662 863,610 C866.056,648.84 872.971,692.201 879.038,725.475 " fill="none" id="sl-msl" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[17eb025897342361bd851f93fa477fff]
link sl to api--><path codeLine="100" d="M822.416,247.386 C743.062,337.511 609.523,486.764 489,610 C457.492,642.218 421.717,676.69 390.477,706.147 " fill="none" id="sl-api" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[ce7bcfb77770f94a81831b8f23590dae]
link sl to ss--><path codeLine="101" d="M920.224,247.048 C932.772,284.175 947.92,328.992 961.751,369.913 " fill="none" id="sl-ss" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[da9abd1873f207cba4baaf944fa348f2]
link pace to pav--><path codeLine="102" d="M284.324,490 C295.957,490 307.59,490 319.223,490 " fill="none" id="pace-pav" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[96167f1f5e43b9ebcc14970849e1c19e]
link pace to api--><path codeLine="103" d="M204.427,562.19 C224.854,604.431 250.786,658.055 271.837,701.584 " fill="none" id="pace-to-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="274.118,706.302,273.8003,696.4583,271.941,701.8008,266.5984,699.9415,274.118,706.302" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="250" y="653.0669">observes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="199.232" y="581.6292">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="262.3167" y="695.4722">1</text><!--MD5=[ad70eea6d1ee7f0bc97d60245e70ecb7]
@startuml
skinparam classAttributeIconSize 0

package "ServerApplication" {
   class "API" as api {
        {field} -observerCollection: ArrayList<Observer>
        {method} +API()
        {method} +subscribeObserver(observer: Observer, cookie: Cookie): void
        {method} +unsubscribeObserver(observer: Observer): void
        {method} +notifyObservers(): void
        {method} +updatePossibleDecisions(): void
        {method} +collectVotes(): void
        {method} +getVotes(): 
  }

  package "ServerLogic" <<Rectangle>>{
    class "ServerShell" as ss {
      {field} +logger: Logger
      {field} -port: int
      {field} -runShell: boolean
      {field} -serverShell: ServerShell
      {field} -bufferedReader: BufferedReader
      {method} +ServerShell()
      {method} +startShell(): void
      {method} +stopShell(): void
      {method} +parseCommand(command: string): void
      {method} +showHelp(): void
      {method} +configPort(): void
      {method} +configCapacity(): void
      {method} +startServer(): void
      {method} +stopServer(): void
      {method} +main(args: string[]): void
    }

    class "ModeratorClientManager" as cm {
      {field} -webSocket: WebSocket
      {field} -ip: int
      {field} -port: int
      {field} +logger: Logger
      {field} -authentificationTokenModeratorClientHash: int
      {method} +ModeratorClientManager(session: Session): void
      {method} +disconnect(): void
      {method} +recieveMessage(message: string): void
      {method} +checkJSON(message: string): void
      {method} +sendMessage(message: string): void
      {method} +evalJSON(): string

    }    

    class "MainServerLogic" as msl {
      {field} -moderator: WebClient
      {field} +logger: Logger
      {method} +MainServerLogic(capacity: int, port: int)
      {method} +onFalseMessage(message: string): void
      {method} +onVotingMessage(message: string): void

    }

    class "PollEvaluator" as pe {
    {field}- possibleDecisions: StoryEvent[]
    {field} -voteCounter: Dictionary<int,int>
    {field} -api: API
    {method} +PollEvaluator()
    {method} +evaluateVotes(ids: int[]): int
    {method} +addVote(id: int): void
  }

    class "ServerLogger" as sl {
      {field} +globalLogger: Logger
      {field} +logFile: FileHandler
      {field} +isSetup: Boolean
      {field} +consoleHandler: Handler
      {method} +Logger()
      {method} +setup(): void
      {method} +addHandler(logger: Logger): void
      {method} +setLevel(level: int): void
      {method} +setConsoleOutput(val: boolean): void
    }
  }
  package "PlayerAudience-Client" <<Rectangle>>{  
    class "PlayerAudienceClientExchange" as pace <<Observer>>{
      {field} -sessionCookie: Cookie
      {field} -hasVoted: boolean
      {field} -selectedDecision: StoryEvent
      {field} -possibleDecisions: StoryEvent[]
      {method} +PlayerAudienceClientExchange()
      {method} +update(): void
      {method} +sendSelectedDecision(): StoryEvent 
    }

    class "PlayerAudienceView" as pav {
      {method} +PlayerAudienceView()
    }
  }
  ss - - msl
  msl - cm
  msl -left- pe
  pe -left- api
  sl ... cm
  sl ... msl
  sl ... api
  sl ... ss
  pace - pav
  api "1" <-up- "n" pace : observes
}
@enduml

PlantUML version 1.2020.20beta11(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>