<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1254px" preserveAspectRatio="none" style="width:1576px;height:1254px;" version="1.1" viewBox="0 0 1576 1254" width="1576px" zoomAndPan="magnify"><defs><filter height="300%" id="f1x70a866d0hj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c047474403e650c4d4572c8d29a316f1]
cluster Moderator Client--><polygon fill="#FFFFFF" filter="url(#f1x70a866d0hj)" points="1098,6,1241,6,1248,28.2969,1559,28.2969,1559,1174.5,1098,1174.5,1098,6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1098" x2="1248" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="1102" y="20.9951">Moderator Client</text><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><polygon fill="#FFFFFF" filter="url(#f1x70a866d0hj)" points="16,213,73,213,80,235.2969,1074,235.2969,1074,1247,16,1247,16,213" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="80" y1="235.2969" y2="235.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="20" y="227.9951">Server</text><!--MD5=[b4e09d266be9964199f2622adcc056fa]
cluster Backend--><rect fill="#FFFFFF" filter="url(#f1x70a866d0hj)" height="967" style="stroke: #000000; stroke-width: 1.5;" width="537" x="513" y="256"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="747.5" y="270.9951">Backend</text><!--MD5=[67adde4c5db0467fcf0b97b7ce37e86c]
cluster PlayerAudience Client--><rect fill="#FFFFFF" filter="url(#f1x70a866d0hj)" height="182" style="stroke: #000000; stroke-width: 1.5;" width="449" x="40" y="701"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="177" y="715.9951">PlayerAudience Client</text><!--MD5=[3eaf92687768346c8d614b6fd2c22fb9]
class StoryEvent--><rect codeLine="5" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="124.8281" id="StoryEvent" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="1209.5" y="41"/><ellipse cx="1291.25" cy="57" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1293.5938,52.6719 C1292.6563,52.2344 1292.0625,52.0938 1291.1875,52.0938 C1288.5625,52.0938 1286.5625,54.1719 1286.5625,56.8906 L1286.5625,58.0156 C1286.5625,60.5938 1288.6719,62.4844 1291.5625,62.4844 C1292.7813,62.4844 1293.9375,62.1875 1294.6875,61.6406 C1295.2656,61.2344 1295.5938,60.7813 1295.5938,60.3906 C1295.5938,59.9375 1295.2031,59.5469 1294.7344,59.5469 C1294.5156,59.5469 1294.3125,59.625 1294.125,59.8125 C1293.6719,60.2969 1293.6719,60.2969 1293.4844,60.3906 C1293.0625,60.6563 1292.375,60.7813 1291.6094,60.7813 C1289.5625,60.7813 1288.2656,59.6875 1288.2656,57.9844 L1288.2656,56.8906 C1288.2656,55.1094 1289.5156,53.7969 1291.25,53.7969 C1291.8281,53.7969 1292.4375,53.9531 1292.9063,54.2031 C1293.3906,54.4844 1293.5625,54.7031 1293.6563,55.1094 C1293.7188,55.5156 1293.75,55.6406 1293.8906,55.7656 C1294.0313,55.9063 1294.2656,56.0156 1294.4844,56.0156 C1294.75,56.0156 1295.0156,55.875 1295.1875,55.6563 C1295.2969,55.5 1295.3281,55.3125 1295.3281,54.8906 L1295.3281,53.4688 C1295.3281,53.0313 1295.3125,52.9063 1295.2188,52.75 C1295.0625,52.4844 1294.7813,52.3438 1294.4844,52.3438 C1294.1875,52.3438 1293.9844,52.4375 1293.7656,52.75 L1293.5938,52.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="1311.75" y="61.1543">StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1210.5" x2="1445.5" y1="73" y2="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="1215.5" y="87.2104">+eventId: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1215.5" y="100.0151">+description: String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="1215.5" y="112.8198">+parent: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1215.5" y="125.6245">+children: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1210.5" x2="1445.5" y1="132.2188" y2="132.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="1215.5" y="146.4292">+StoryEvent(parent: StoryEvent, id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="1215.5" y="159.2339">+addChild(): void</text><!--MD5=[efd5ebcc74ce0165d13c1df9fdb2b1d2]
class StoryGraph--><rect codeLine="14" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="176.0469" id="StoryGraph" style="stroke: #A80036; stroke-width: 1.5;" width="322" x="1167" y="278"/><ellipse cx="1289.75" cy="294" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1292.0938,289.6719 C1291.1563,289.2344 1290.5625,289.0938 1289.6875,289.0938 C1287.0625,289.0938 1285.0625,291.1719 1285.0625,293.8906 L1285.0625,295.0156 C1285.0625,297.5938 1287.1719,299.4844 1290.0625,299.4844 C1291.2813,299.4844 1292.4375,299.1875 1293.1875,298.6406 C1293.7656,298.2344 1294.0938,297.7813 1294.0938,297.3906 C1294.0938,296.9375 1293.7031,296.5469 1293.2344,296.5469 C1293.0156,296.5469 1292.8125,296.625 1292.625,296.8125 C1292.1719,297.2969 1292.1719,297.2969 1291.9844,297.3906 C1291.5625,297.6563 1290.875,297.7813 1290.1094,297.7813 C1288.0625,297.7813 1286.7656,296.6875 1286.7656,294.9844 L1286.7656,293.8906 C1286.7656,292.1094 1288.0156,290.7969 1289.75,290.7969 C1290.3281,290.7969 1290.9375,290.9531 1291.4063,291.2031 C1291.8906,291.4844 1292.0625,291.7031 1292.1563,292.1094 C1292.2188,292.5156 1292.25,292.6406 1292.3906,292.7656 C1292.5313,292.9063 1292.7656,293.0156 1292.9844,293.0156 C1293.25,293.0156 1293.5156,292.875 1293.6875,292.6563 C1293.7969,292.5 1293.8281,292.3125 1293.8281,291.8906 L1293.8281,290.4688 C1293.8281,290.0313 1293.8125,289.9063 1293.7188,289.75 C1293.5625,289.4844 1293.2813,289.3438 1292.9844,289.3438 C1292.6875,289.3438 1292.4844,289.4375 1292.2656,289.75 L1292.0938,289.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="1310.25" y="298.1543">StoryGraph</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1168" x2="1488" y1="310" y2="310"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="1173" y="324.2104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="1173" y="337.0151">+character: Character</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="1173" y="349.8198">+root: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="1173" y="362.6245">+currentEvent: StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1168" x2="1488" y1="369.2188" y2="369.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="1173" y="383.4292">+StoryGraph(id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="1173" y="396.2339">+loadGraphFromFile(): Graph</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1173" y="409.0386">+saveGraphToFile(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="1173" y="421.8433">+getNextPossibleEvent(): StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="310" x="1173" y="434.6479">+setCurrentEvent(newCurrentEvent: StoryEvent): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="1173" y="447.4526">+getNextStoryEventById(id: int): StoryEvent</text><!--MD5=[42e1add689e888dd7b55d3ee3f1dd6d7]
class Skill--><rect codeLine="27" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="124.8281" id="Skill" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="1114" y="739"/><ellipse cx="1198.75" cy="755" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1201.0938,750.6719 C1200.1563,750.2344 1199.5625,750.0938 1198.6875,750.0938 C1196.0625,750.0938 1194.0625,752.1719 1194.0625,754.8906 L1194.0625,756.0156 C1194.0625,758.5938 1196.1719,760.4844 1199.0625,760.4844 C1200.2813,760.4844 1201.4375,760.1875 1202.1875,759.6406 C1202.7656,759.2344 1203.0938,758.7813 1203.0938,758.3906 C1203.0938,757.9375 1202.7031,757.5469 1202.2344,757.5469 C1202.0156,757.5469 1201.8125,757.625 1201.625,757.8125 C1201.1719,758.2969 1201.1719,758.2969 1200.9844,758.3906 C1200.5625,758.6563 1199.875,758.7813 1199.1094,758.7813 C1197.0625,758.7813 1195.7656,757.6875 1195.7656,755.9844 L1195.7656,754.8906 C1195.7656,753.1094 1197.0156,751.7969 1198.75,751.7969 C1199.3281,751.7969 1199.9375,751.9531 1200.4063,752.2031 C1200.8906,752.4844 1201.0625,752.7031 1201.1563,753.1094 C1201.2188,753.5156 1201.25,753.6406 1201.3906,753.7656 C1201.5313,753.9063 1201.7656,754.0156 1201.9844,754.0156 C1202.25,754.0156 1202.5156,753.875 1202.6875,753.6563 C1202.7969,753.5 1202.8281,753.3125 1202.8281,752.8906 L1202.8281,751.4688 C1202.8281,751.0313 1202.8125,750.9063 1202.7188,750.75 C1202.5625,750.4844 1202.2813,750.3438 1201.9844,750.3438 C1201.6875,750.3438 1201.4844,750.4375 1201.2656,750.75 L1201.0938,750.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="1219.25" y="759.1543">Skill</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1315" y1="771" y2="771"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="1120" y="785.2104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="1120" y="798.0151">+value: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1120" y="810.8198">+description: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1315" y1="817.4141" y2="817.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1120" y="831.6245">+Skill(id: int, val: int, desc: String)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="1120" y="844.4292">+setValue(val: int): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="1120" y="857.2339">+getValue(): int</text><!--MD5=[3eff9d4279c887ef9286477750bdaaff]
class Character--><rect codeLine="36" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="99.2188" id="Character" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1176.5" y="515"/><ellipse cx="1198.25" cy="531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1200.5938,526.6719 C1199.6563,526.2344 1199.0625,526.0938 1198.1875,526.0938 C1195.5625,526.0938 1193.5625,528.1719 1193.5625,530.8906 L1193.5625,532.0156 C1193.5625,534.5938 1195.6719,536.4844 1198.5625,536.4844 C1199.7813,536.4844 1200.9375,536.1875 1201.6875,535.6406 C1202.2656,535.2344 1202.5938,534.7813 1202.5938,534.3906 C1202.5938,533.9375 1202.2031,533.5469 1201.7344,533.5469 C1201.5156,533.5469 1201.3125,533.625 1201.125,533.8125 C1200.6719,534.2969 1200.6719,534.2969 1200.4844,534.3906 C1200.0625,534.6563 1199.375,534.7813 1198.6094,534.7813 C1196.5625,534.7813 1195.2656,533.6875 1195.2656,531.9844 L1195.2656,530.8906 C1195.2656,529.1094 1196.5156,527.7969 1198.25,527.7969 C1198.8281,527.7969 1199.4375,527.9531 1199.9063,528.2031 C1200.3906,528.4844 1200.5625,528.7031 1200.6563,529.1094 C1200.7188,529.5156 1200.75,529.6406 1200.8906,529.7656 C1201.0313,529.9063 1201.2656,530.0156 1201.4844,530.0156 C1201.75,530.0156 1202.0156,529.875 1202.1875,529.6563 C1202.2969,529.5 1202.3281,529.3125 1202.3281,528.8906 L1202.3281,527.4688 C1202.3281,527.0313 1202.3125,526.9063 1202.2188,526.75 C1202.0625,526.4844 1201.7813,526.3438 1201.4844,526.3438 C1201.1875,526.3438 1200.9844,526.4375 1200.7656,526.75 L1200.5938,526.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="1213.75" y="535.1543">Character</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1177.5" x2="1280.5" y1="547" y2="547"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="1182.5" y="561.2104">+sprite: Texture</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1182.5" y="574.0151">+abilities: Skill[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="1182.5" y="586.8198">+name: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1177.5" x2="1280.5" y1="593.4141" y2="593.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1182.5" y="607.6245">+Character()</text><!--MD5=[bb849c1528464e2c6bbfb2687d0866b0]
class mf--><rect codeLine="43" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="99.2188" id="mf" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="1337.5" y="515"/><ellipse cx="1385.75" cy="531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1388.0938,526.6719 C1387.1563,526.2344 1386.5625,526.0938 1385.6875,526.0938 C1383.0625,526.0938 1381.0625,528.1719 1381.0625,530.8906 L1381.0625,532.0156 C1381.0625,534.5938 1383.1719,536.4844 1386.0625,536.4844 C1387.2813,536.4844 1388.4375,536.1875 1389.1875,535.6406 C1389.7656,535.2344 1390.0938,534.7813 1390.0938,534.3906 C1390.0938,533.9375 1389.7031,533.5469 1389.2344,533.5469 C1389.0156,533.5469 1388.8125,533.625 1388.625,533.8125 C1388.1719,534.2969 1388.1719,534.2969 1387.9844,534.3906 C1387.5625,534.6563 1386.875,534.7813 1386.1094,534.7813 C1384.0625,534.7813 1382.7656,533.6875 1382.7656,531.9844 L1382.7656,530.8906 C1382.7656,529.1094 1384.0156,527.7969 1385.75,527.7969 C1386.3281,527.7969 1386.9375,527.9531 1387.4063,528.2031 C1387.8906,528.4844 1388.0625,528.7031 1388.1563,529.1094 C1388.2188,529.5156 1388.25,529.6406 1388.3906,529.7656 C1388.5313,529.9063 1388.7656,530.0156 1388.9844,530.0156 C1389.25,530.0156 1389.5156,529.875 1389.6875,529.6563 C1389.7969,529.5 1389.8281,529.3125 1389.8281,528.8906 L1389.8281,527.4688 C1389.8281,527.0313 1389.8125,526.9063 1389.7188,526.75 C1389.5625,526.4844 1389.2813,526.3438 1388.9844,526.3438 C1388.6875,526.3438 1388.4844,526.4375 1388.2656,526.75 L1388.0938,526.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="1406.25" y="535.1543">ModeratorView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1338.5" x2="1533.5" y1="547" y2="547"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1343.5" y="561.2104">+timeoutDuration: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1338.5" x2="1533.5" y1="567.8047" y2="567.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="1343.5" y="582.0151">+ModeratorView()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="1343.5" y="594.8198">+pausePolling(Boolean): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1343.5" y="607.6245">+offlineMode(val: boolean): void</text><!--MD5=[9105e509a9f69a1dfba1c0054edeb4e1]
class pe--><rect codeLine="50" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="150.4375" id="pe" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="1351" y="726.5"/><ellipse cx="1405.25" cy="742.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1407.5938,738.1719 C1406.6563,737.7344 1406.0625,737.5938 1405.1875,737.5938 C1402.5625,737.5938 1400.5625,739.6719 1400.5625,742.3906 L1400.5625,743.5156 C1400.5625,746.0938 1402.6719,747.9844 1405.5625,747.9844 C1406.7813,747.9844 1407.9375,747.6875 1408.6875,747.1406 C1409.2656,746.7344 1409.5938,746.2813 1409.5938,745.8906 C1409.5938,745.4375 1409.2031,745.0469 1408.7344,745.0469 C1408.5156,745.0469 1408.3125,745.125 1408.125,745.3125 C1407.6719,745.7969 1407.6719,745.7969 1407.4844,745.8906 C1407.0625,746.1563 1406.375,746.2813 1405.6094,746.2813 C1403.5625,746.2813 1402.2656,745.1875 1402.2656,743.4844 L1402.2656,742.3906 C1402.2656,740.6094 1403.5156,739.2969 1405.25,739.2969 C1405.8281,739.2969 1406.4375,739.4531 1406.9063,739.7031 C1407.3906,739.9844 1407.5625,740.2031 1407.6563,740.6094 C1407.7188,741.0156 1407.75,741.1406 1407.8906,741.2656 C1408.0313,741.4063 1408.2656,741.5156 1408.4844,741.5156 C1408.75,741.5156 1409.0156,741.375 1409.1875,741.1563 C1409.2969,741 1409.3281,740.8125 1409.3281,740.3906 L1409.3281,738.9688 C1409.3281,738.5313 1409.3125,738.4063 1409.2188,738.25 C1409.0625,737.9844 1408.7813,737.8438 1408.4844,737.8438 C1408.1875,737.8438 1407.9844,737.9375 1407.7656,738.25 L1407.5938,738.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="1425.75" y="746.6543">PollEvaluator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1352" x2="1542" y1="758.5" y2="758.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="1357" y="772.7104">possibleDecisions: StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="1357" y="785.5151">timeout: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="1357" y="798.3198">voteCounter: int[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1352" x2="1542" y1="804.9141" y2="804.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1357" y="819.1245">+PollEvaluator()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="1357" y="831.9292">+checkServerStatus(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="1357" y="844.7339">+broadcastNextDecision(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1357" y="857.5386">+evaluateVotes(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="1357" y="870.3433">+addVote(): void</text><!--MD5=[aef0d3d3c8a893455b9107cd4a3b357c]
class mcei--><rect codeLine="62" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="105.1563" id="mcei" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="1174" y="1053.5"/><ellipse cx="1189" cy="1072.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1191.3438,1068.1406 C1190.4063,1067.7031 1189.8125,1067.5625 1188.9375,1067.5625 C1186.3125,1067.5625 1184.3125,1069.6406 1184.3125,1072.3594 L1184.3125,1073.4844 C1184.3125,1076.0625 1186.4219,1077.9531 1189.3125,1077.9531 C1190.5313,1077.9531 1191.6875,1077.6563 1192.4375,1077.1094 C1193.0156,1076.7031 1193.3438,1076.25 1193.3438,1075.8594 C1193.3438,1075.4063 1192.9531,1075.0156 1192.4844,1075.0156 C1192.2656,1075.0156 1192.0625,1075.0938 1191.875,1075.2813 C1191.4219,1075.7656 1191.4219,1075.7656 1191.2344,1075.8594 C1190.8125,1076.125 1190.125,1076.25 1189.3594,1076.25 C1187.3125,1076.25 1186.0156,1075.1563 1186.0156,1073.4531 L1186.0156,1072.3594 C1186.0156,1070.5781 1187.2656,1069.2656 1189,1069.2656 C1189.5781,1069.2656 1190.1875,1069.4219 1190.6563,1069.6719 C1191.1406,1069.9531 1191.3125,1070.1719 1191.4063,1070.5781 C1191.4688,1070.9844 1191.5,1071.1094 1191.6406,1071.2344 C1191.7813,1071.375 1192.0156,1071.4844 1192.2344,1071.4844 C1192.5,1071.4844 1192.7656,1071.3438 1192.9375,1071.125 C1193.0469,1070.9688 1193.0781,1070.7813 1193.0781,1070.3594 L1193.0781,1068.9375 C1193.0781,1068.5 1193.0625,1068.375 1192.9688,1068.2188 C1192.8125,1067.9531 1192.5313,1067.8125 1192.2344,1067.8125 C1191.9375,1067.8125 1191.7344,1067.9063 1191.5156,1068.2188 L1191.3438,1068.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="1246.5" y="1069.6387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="1203" y="1083.6074">ModeratorClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1175" x2="1359" y1="1091.4375" y2="1091.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="1180" y="1105.6479">+websocket:WebSocket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1175" x2="1359" y1="1112.2422" y2="1112.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="1180" y="1126.4526">+ModeratorClientExchange()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1180" y="1139.2573">+getCurrentPollEval(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="1180" y="1152.062">+makeJSON()</text><!--MD5=[1e281070be324fe4119de6bf55ec0dae]
class api--><rect codeLine="78" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="124.8281" id="api" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="272.5" y="1043.5"/><ellipse cx="370.25" cy="1059.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M372.5938,1055.1719 C371.6563,1054.7344 371.0625,1054.5938 370.1875,1054.5938 C367.5625,1054.5938 365.5625,1056.6719 365.5625,1059.3906 L365.5625,1060.5156 C365.5625,1063.0938 367.6719,1064.9844 370.5625,1064.9844 C371.7813,1064.9844 372.9375,1064.6875 373.6875,1064.1406 C374.2656,1063.7344 374.5938,1063.2813 374.5938,1062.8906 C374.5938,1062.4375 374.2031,1062.0469 373.7344,1062.0469 C373.5156,1062.0469 373.3125,1062.125 373.125,1062.3125 C372.6719,1062.7969 372.6719,1062.7969 372.4844,1062.8906 C372.0625,1063.1563 371.375,1063.2813 370.6094,1063.2813 C368.5625,1063.2813 367.2656,1062.1875 367.2656,1060.4844 L367.2656,1059.3906 C367.2656,1057.6094 368.5156,1056.2969 370.25,1056.2969 C370.8281,1056.2969 371.4375,1056.4531 371.9063,1056.7031 C372.3906,1056.9844 372.5625,1057.2031 372.6563,1057.6094 C372.7188,1058.0156 372.75,1058.1406 372.8906,1058.2656 C373.0313,1058.4063 373.2656,1058.5156 373.4844,1058.5156 C373.75,1058.5156 374.0156,1058.375 374.1875,1058.1563 C374.2969,1058 374.3281,1057.8125 374.3281,1057.3906 L374.3281,1055.9688 C374.3281,1055.5313 374.3125,1055.4063 374.2188,1055.25 C374.0625,1054.9844 373.7813,1054.8438 373.4844,1054.8438 C373.1875,1054.8438 372.9844,1054.9375 372.7656,1055.25 L372.5938,1055.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="390.75" y="1063.6543">API</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="273.5" x2="492.5" y1="1075.5" y2="1075.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="278.5" y="1089.7104">+observerCollection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="273.5" x2="492.5" y1="1096.3047" y2="1096.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="278.5" y="1110.5151">+registerObserver(observer, cookie)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="278.5" y="1123.3198">+unregisterObserver(observer)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="278.5" y="1136.1245">+notifyObservers()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="278.5" y="1148.9292">+updatePossibleDecisions()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="278.5" y="1161.7339">+collectVotes()</text><!--MD5=[6bfcf15cc25972516e1f43cee16dbcb3]
class ss--><rect codeLine="87" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="252.875" id="ss" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="636.5" y="675"/><ellipse cx="701.75" cy="691" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M704.0938,686.6719 C703.1563,686.2344 702.5625,686.0938 701.6875,686.0938 C699.0625,686.0938 697.0625,688.1719 697.0625,690.8906 L697.0625,692.0156 C697.0625,694.5938 699.1719,696.4844 702.0625,696.4844 C703.2813,696.4844 704.4375,696.1875 705.1875,695.6406 C705.7656,695.2344 706.0938,694.7813 706.0938,694.3906 C706.0938,693.9375 705.7031,693.5469 705.2344,693.5469 C705.0156,693.5469 704.8125,693.625 704.625,693.8125 C704.1719,694.2969 704.1719,694.2969 703.9844,694.3906 C703.5625,694.6563 702.875,694.7813 702.1094,694.7813 C700.0625,694.7813 698.7656,693.6875 698.7656,691.9844 L698.7656,690.8906 C698.7656,689.1094 700.0156,687.7969 701.75,687.7969 C702.3281,687.7969 702.9375,687.9531 703.4063,688.2031 C703.8906,688.4844 704.0625,688.7031 704.1563,689.1094 C704.2188,689.5156 704.25,689.6406 704.3906,689.7656 C704.5313,689.9063 704.7656,690.0156 704.9844,690.0156 C705.25,690.0156 705.5156,689.875 705.6875,689.6563 C705.7969,689.5 705.8281,689.3125 705.8281,688.8906 L705.8281,687.4688 C705.8281,687.0313 705.8125,686.9063 705.7188,686.75 C705.5625,686.4844 705.2813,686.3438 704.9844,686.3438 C704.6875,686.3438 704.4844,686.4375 704.2656,686.75 L704.0938,686.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="722.25" y="695.1543">ServerShell</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="637.5" x2="844.5" y1="707" y2="707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="642.5" y="721.2104">+Logger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="642.5" y="734.0151">+port: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="642.5" y="746.8198">+runShell: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="642.5" y="759.6245">+serverShell: ServerShell</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="642.5" y="772.4292">+capacity: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="642.5" y="785.2339">+bufferedReader: BufferedReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="637.5" x2="844.5" y1="791.8281" y2="791.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="642.5" y="806.0386">+ServerShell()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="642.5" y="818.8433">+startShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="642.5" y="831.6479">+stopShell(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="642.5" y="844.4526">+parseCommand(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="642.5" y="857.2573">+showHelp(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="642.5" y="870.062">+configPort(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="642.5" y="882.8667">+configCapacity(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="642.5" y="895.6714">+startServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="642.5" y="908.4761">+stopServer(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="642.5" y="921.2808">+main(String[]): void</text><!--MD5=[952aa88079c2ad50e6f0d17205c717c0]
class cm--><rect codeLine="106" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="201.6563" id="cm" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="796.5" y="1005"/><ellipse cx="868.25" cy="1021" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M870.5938,1016.6719 C869.6563,1016.2344 869.0625,1016.0938 868.1875,1016.0938 C865.5625,1016.0938 863.5625,1018.1719 863.5625,1020.8906 L863.5625,1022.0156 C863.5625,1024.5938 865.6719,1026.4844 868.5625,1026.4844 C869.7813,1026.4844 870.9375,1026.1875 871.6875,1025.6406 C872.2656,1025.2344 872.5938,1024.7813 872.5938,1024.3906 C872.5938,1023.9375 872.2031,1023.5469 871.7344,1023.5469 C871.5156,1023.5469 871.3125,1023.625 871.125,1023.8125 C870.6719,1024.2969 870.6719,1024.2969 870.4844,1024.3906 C870.0625,1024.6563 869.375,1024.7813 868.6094,1024.7813 C866.5625,1024.7813 865.2656,1023.6875 865.2656,1021.9844 L865.2656,1020.8906 C865.2656,1019.1094 866.5156,1017.7969 868.25,1017.7969 C868.8281,1017.7969 869.4375,1017.9531 869.9063,1018.2031 C870.3906,1018.4844 870.5625,1018.7031 870.6563,1019.1094 C870.7188,1019.5156 870.75,1019.6406 870.8906,1019.7656 C871.0313,1019.9063 871.2656,1020.0156 871.4844,1020.0156 C871.75,1020.0156 872.0156,1019.875 872.1875,1019.6563 C872.2969,1019.5 872.3281,1019.3125 872.3281,1018.8906 L872.3281,1017.4688 C872.3281,1017.0313 872.3125,1016.9063 872.2188,1016.75 C872.0625,1016.4844 871.7813,1016.3438 871.4844,1016.3438 C871.1875,1016.3438 870.9844,1016.4375 870.7656,1016.75 L870.5938,1016.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="888.75" y="1025.1543">ClientManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="797.5" x2="1032.5" y1="1037" y2="1037"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="802.5" y="1051.2104">+webSocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="19" x="802.5" y="1064.0151">+ip</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="802.5" y="1076.8198">+port</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="802.5" y="1089.6245">+Logger: Logger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="797.5" x2="1032.5" y1="1096.2188" y2="1096.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="802.5" y="1110.4292">+ClientManager(session: Session): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="802.5" y="1123.2339">+disconnect(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="802.5" y="1136.0386">+onDisconnect(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="802.5" y="1148.8433">+recieve(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="802.5" y="1161.6479">+checkJSON(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="802.5" y="1174.4526">+sendMessage(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="802.5" y="1187.2573">+send(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="802.5" y="1200.062">+recieve(String): void</text><!--MD5=[380687b934d22663c3818bb6fe2c579f]
class msl--><rect codeLine="121" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="112.0234" id="msl" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="529" y="1050"/><ellipse cx="590.75" cy="1066" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M593.0938,1061.6719 C592.1563,1061.2344 591.5625,1061.0938 590.6875,1061.0938 C588.0625,1061.0938 586.0625,1063.1719 586.0625,1065.8906 L586.0625,1067.0156 C586.0625,1069.5938 588.1719,1071.4844 591.0625,1071.4844 C592.2813,1071.4844 593.4375,1071.1875 594.1875,1070.6406 C594.7656,1070.2344 595.0938,1069.7813 595.0938,1069.3906 C595.0938,1068.9375 594.7031,1068.5469 594.2344,1068.5469 C594.0156,1068.5469 593.8125,1068.625 593.625,1068.8125 C593.1719,1069.2969 593.1719,1069.2969 592.9844,1069.3906 C592.5625,1069.6563 591.875,1069.7813 591.1094,1069.7813 C589.0625,1069.7813 587.7656,1068.6875 587.7656,1066.9844 L587.7656,1065.8906 C587.7656,1064.1094 589.0156,1062.7969 590.75,1062.7969 C591.3281,1062.7969 591.9375,1062.9531 592.4063,1063.2031 C592.8906,1063.4844 593.0625,1063.7031 593.1563,1064.1094 C593.2188,1064.5156 593.25,1064.6406 593.3906,1064.7656 C593.5313,1064.9063 593.7656,1065.0156 593.9844,1065.0156 C594.25,1065.0156 594.5156,1064.875 594.6875,1064.6563 C594.7969,1064.5 594.8281,1064.3125 594.8281,1063.8906 L594.8281,1062.4688 C594.8281,1062.0313 594.8125,1061.9063 594.7188,1061.75 C594.5625,1061.4844 594.2813,1061.3438 593.9844,1061.3438 C593.6875,1061.3438 593.4844,1061.4375 593.2656,1061.75 L593.0938,1061.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="611.25" y="1070.1543">MainServerLogic</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="760" y1="1082" y2="1082"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="535" y="1096.2104">+moderator: WebClient</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="535" y="1109.0151">+Logger: Logger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="530" x2="760" y1="1115.6094" y2="1115.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="535" y="1129.8198">MainServerLogic(capacity: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="535" y="1142.6245">+onFalseMessage(String): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="535" y="1155.4292">+onVotingMessage(String): void</text><!--MD5=[e5ed2fcbff96bd03a55f8cf01186b818]
class sl--><rect codeLine="130" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="150.4375" id="sl" style="stroke: #A80036; stroke-width: 1.5;" width="208" x="597" y="291"/><ellipse cx="654.75" cy="307" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M657.0938,302.6719 C656.1563,302.2344 655.5625,302.0938 654.6875,302.0938 C652.0625,302.0938 650.0625,304.1719 650.0625,306.8906 L650.0625,308.0156 C650.0625,310.5938 652.1719,312.4844 655.0625,312.4844 C656.2813,312.4844 657.4375,312.1875 658.1875,311.6406 C658.7656,311.2344 659.0938,310.7813 659.0938,310.3906 C659.0938,309.9375 658.7031,309.5469 658.2344,309.5469 C658.0156,309.5469 657.8125,309.625 657.625,309.8125 C657.1719,310.2969 657.1719,310.2969 656.9844,310.3906 C656.5625,310.6563 655.875,310.7813 655.1094,310.7813 C653.0625,310.7813 651.7656,309.6875 651.7656,307.9844 L651.7656,306.8906 C651.7656,305.1094 653.0156,303.7969 654.75,303.7969 C655.3281,303.7969 655.9375,303.9531 656.4063,304.2031 C656.8906,304.4844 657.0625,304.7031 657.1563,305.1094 C657.2188,305.5156 657.25,305.6406 657.3906,305.7656 C657.5313,305.9063 657.7656,306.0156 657.9844,306.0156 C658.25,306.0156 658.5156,305.875 658.6875,305.6563 C658.7969,305.5 658.8281,305.3125 658.8281,304.8906 L658.8281,303.4688 C658.8281,303.0313 658.8125,302.9063 658.7188,302.75 C658.5625,302.4844 658.2813,302.3438 657.9844,302.3438 C657.6875,302.3438 657.4844,302.4375 657.2656,302.75 L657.0938,302.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="675.25" y="311.1543">ServerLogger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="598" x2="804" y1="323" y2="323"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="603" y="337.2104">+GlobalLogger: Logger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="603" y="350.0151">+logFile: FileHandler</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="603" y="362.8198">+isSetup: Boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="603" y="375.6245">+consoleHandler: Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="598" x2="804" y1="382.2188" y2="382.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="603" y="396.4292">+setup(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="603" y="409.2339">+addHandler(Logger): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="603" y="422.0386">+setLevel(Level): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="603" y="434.8433">+setConsoleOutput(boolean): void</text><!--MD5=[e590bdab9987379c47d474280840512e]
class pace--><rect codeLine="142" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="130.7656" id="pace" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="56" y="736"/><ellipse cx="76.85" cy="754.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M79.1938,750.6406 C78.2563,750.2031 77.6625,750.0625 76.7875,750.0625 C74.1625,750.0625 72.1625,752.1406 72.1625,754.8594 L72.1625,755.9844 C72.1625,758.5625 74.2719,760.4531 77.1625,760.4531 C78.3813,760.4531 79.5375,760.1563 80.2875,759.6094 C80.8656,759.2031 81.1938,758.75 81.1938,758.3594 C81.1938,757.9063 80.8031,757.5156 80.3344,757.5156 C80.1156,757.5156 79.9125,757.5938 79.725,757.7813 C79.2719,758.2656 79.2719,758.2656 79.0844,758.3594 C78.6625,758.625 77.975,758.75 77.2094,758.75 C75.1625,758.75 73.8656,757.6563 73.8656,755.9531 L73.8656,754.8594 C73.8656,753.0781 75.1156,751.7656 76.85,751.7656 C77.4281,751.7656 78.0375,751.9219 78.5063,752.1719 C78.9906,752.4531 79.1625,752.6719 79.2563,753.0781 C79.3188,753.4844 79.35,753.6094 79.4906,753.7344 C79.6313,753.875 79.8656,753.9844 80.0844,753.9844 C80.35,753.9844 80.6156,753.8438 80.7875,753.625 C80.8969,753.4688 80.9281,753.2813 80.9281,752.8594 L80.9281,751.4375 C80.9281,751 80.9125,750.875 80.8188,750.7188 C80.6625,750.4531 80.3813,750.3125 80.0844,750.3125 C79.7875,750.3125 79.5844,750.4063 79.3656,750.7188 L79.1938,750.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="68" x="149.65" y="752.1387">«Observer»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="92.15" y="766.1074">PlayerAudienceClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="773.9375" y2="773.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="62" y="788.1479">+sessionCookie: Cookie</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="62" y="800.9526">+hasVoted: boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="62" y="813.7573">+selectedDecision: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="62" y="826.562">+possibleDecisions: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="57" x2="283" y1="833.1563" y2="833.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="62" y="847.3667">+update()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="216" x="62" y="860.1714">+sendSelectedDecision(): StoryEvent</text><!--MD5=[046b75ba0a1981da758680c895f9ffd8]
class pav--><rect codeLine="151" fill="#FEFECE" filter="url(#f1x70a866d0hj)" height="60.8047" id="pav" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="319.5" y="771"/><ellipse cx="334.5" cy="787" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336.8438,782.6719 C335.9063,782.2344 335.3125,782.0938 334.4375,782.0938 C331.8125,782.0938 329.8125,784.1719 329.8125,786.8906 L329.8125,788.0156 C329.8125,790.5938 331.9219,792.4844 334.8125,792.4844 C336.0313,792.4844 337.1875,792.1875 337.9375,791.6406 C338.5156,791.2344 338.8438,790.7813 338.8438,790.3906 C338.8438,789.9375 338.4531,789.5469 337.9844,789.5469 C337.7656,789.5469 337.5625,789.625 337.375,789.8125 C336.9219,790.2969 336.9219,790.2969 336.7344,790.3906 C336.3125,790.6563 335.625,790.7813 334.8594,790.7813 C332.8125,790.7813 331.5156,789.6875 331.5156,787.9844 L331.5156,786.8906 C331.5156,785.1094 332.7656,783.7969 334.5,783.7969 C335.0781,783.7969 335.6875,783.9531 336.1563,784.2031 C336.6406,784.4844 336.8125,784.7031 336.9063,785.1094 C336.9688,785.5156 337,785.6406 337.1406,785.7656 C337.2813,785.9063 337.5156,786.0156 337.7344,786.0156 C338,786.0156 338.2656,785.875 338.4375,785.6563 C338.5469,785.5 338.5781,785.3125 338.5781,784.8906 L338.5781,783.4688 C338.5781,783.0313 338.5625,782.9063 338.4688,782.75 C338.3125,782.4844 338.0313,782.3438 337.7344,782.3438 C337.4375,782.3438 337.2344,782.4375 337.0156,782.75 L336.8438,782.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="348.5" y="791.1543">PlayerAudienceView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="803" y2="803"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="471.5" y1="811" y2="811"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="325.5" y="825.2104">+PlayerAudienceView()</text><!--MD5=[513d28559cb9b2f986fa50a4c3eda83f]
link StoryEvent to StoryGraph--><path codeLine="69" d="M1328,166.23 C1328,195.59 1328,231.43 1328,264.56 " fill="none" id="StoryEvent-to-StoryGraph" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1328,277.586,1332,271.586,1328,265.586,1324,271.586,1328,277.586" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1319.5625" y="185.995">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1319.6813" y="267.0175">1</text><!--MD5=[c53e1f9c02f78d6f6c6c47087547b478]
link StoryGraph to mf--><path codeLine="70" d="M1375.84,454.046 C1387.3,474.885 1399.12,496.406 1409.23,514.791 " fill="none" id="StoryGraph-mf" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f80b4c689c2fbad67007e34e43864d26]
link StoryGraph to Character--><path codeLine="71" d="M1284.14,454.046 C1273.65,474.885 1262.8,496.406 1253.54,514.791 " fill="none" id="StoryGraph-Character" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b16aa1dee279ab3d1d003602504b70d]
reverse link Character to Skill--><path codeLine="72" d="M1225.31,627.421 C1223.26,661.833 1220.72,704.509 1218.67,738.874 " fill="none" id="Character-backto-Skill" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1226.1,614.192,1221.7506,619.9438,1225.3871,626.1708,1229.7365,620.419,1226.1,614.192" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1217.1297" y="634.2955">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1210.6318" y="727.8502">n</text><!--MD5=[d29554897930022c58dd8210ad447ef6]
link mf to pe--><path codeLine="73" d="M1438.28,614.192 C1439.8,646.592 1441.82,689.769 1443.53,726.399 " fill="none" id="mf-pe" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aec115d956d7b212d45293ef7ee64686]
link pe to mcei--><path codeLine="74" d="M1402.74,876.887 C1370.15,931.642 1326.68,1004.702 1297.81,1053.222 " fill="none" id="pe-mcei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a0d3bbc68f741b6e52f50e6f2273a72d]
link ss to msl--><path codeLine="155" d="M701.121,928.159 C687.676,970.527 673.355,1015.653 662.545,1049.716 " fill="none" id="ss-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7d06e1ba490a93264d4a8b472a43ae41]
link msl to cm--><path codeLine="156" d="M761.016,1106 C772.745,1106 784.474,1106 796.203,1106 " fill="none" id="msl-cm" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[507f6a785ef230083e89882233c22fea]
link api to msl--><path codeLine="157" d="M493.531,1106 C505.266,1106 517.001,1106 528.736,1106 " fill="none" id="api-msl" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[671dab341200759546ed8586cdbf8a87]
link sl to cm--><path codeLine="158" d="M749.908,441.158 C787.238,501.545 836.605,590.357 863,675 C897.138,784.476 909.057,916.112 913.114,1004.658 " fill="none" id="sl-cm" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[a5942343fc64a8361275d61bf78cabe0]
link sl to msl--><path codeLine="159" d="M675.405,441.218 C655.545,502.932 629.66,593.522 619,675 C604.412,786.494 610.807,815.854 619,928 C621.998,969.044 628.858,1015.017 634.779,1049.821 " fill="none" id="sl-msl" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[17eb025897342361bd851f93fa477fff]
link sl to api--><path codeLine="160" d="M658.151,441.021 C645.602,464.276 632.458,490.329 622,515 C546.74,692.546 568.611,752.362 489,928 C470.886,967.964 445.836,1010.21 424.636,1043.403 " fill="none" id="sl-api" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[ce7bcfb77770f94a81831b8f23590dae]
link sl to ss--><path codeLine="161" d="M707.831,441.029 C713.744,505.112 722.422,599.156 729.418,674.981 " fill="none" id="sl-ss" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[da9abd1873f207cba4baaf944fa348f2]
link pace to pav--><path codeLine="162" d="M284.324,801.5 C295.957,801.5 307.59,801.5 319.223,801.5 " fill="none" id="pace-pav" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[96167f1f5e43b9ebcc14970849e1c19e]
link pace to api--><path codeLine="163" d="M215.433,867.023 C251.144,917.739 300.69,988.105 336.638,1039.158 " fill="none" id="pace-to-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="339.637,1043.417,337.7249,1033.7555,336.7579,1039.3291,331.1843,1038.3621,339.637,1043.417" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="291" y="971.0669">observes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="211.7058" y="886.6393">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="326.1607" y="1032.3982">1</text><!--MD5=[58a85bdb989a432d30a1624e5616c617]
link mcei to cm--><path codeLine="166" d="M1173.55,1106 C1126.9,1106 1080.24,1106 1033.59,1106 " fill="none" id="mcei-cm" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fdf5c0328d6e2943e90af41ba81ad20d]
@startuml
skinparam classAttributeIconSize 0

package "Moderator Client" {

  class StoryEvent {
    {field} +eventId: int
    {field} +description: String
    {field} +parent: StoryEvent
    {field} +children: StoryEvent[]
    {method} +StoryEvent(parent: StoryEvent, id: int)
    {method} +addChild(): void
  }

  class StoryGraph {
    {field} +id: int
    {field} +character: Character
    {field} +root: StoryEvent
    {field} +currentEvent: StoryEvent
    {method} +StoryGraph(id: int)
    {method} +loadGraphFromFile(): Graph
    {method} +saveGraphToFile(): void
    {method} +getNextPossibleEvent(): StoryEvent[]
    {method} +setCurrentEvent(newCurrentEvent: StoryEvent): void
    {method} +getNextStoryEventById(id: int): StoryEvent
  }

  class Skill {
    {field} +id: int
    {field} +value: int
    {field} +description: String
    {method} + Skill(id: int, val: int, desc: String)
    {method} + setValue(val: int): void
    {method} + getValue(): int
  }

  class Character {
    {field} +sprite: Texture
    {field} +abilities: Skill[]
    {field} +name: String
    {method} +Character()
  }

  class "ModeratorView" as mf {
    {field} +timeoutDuration: int
    {method} +ModeratorView()
    {method} +pausePolling(Boolean): void
    {method} +offlineMode(val: boolean): void
  }

  class "PollEvaluator" as pe {

    {field} possibleDecisions: StoryEvent[]
    {field} timeout: int
    {field} voteCounter: int[]
    {method} +PollEvaluator()
    {method} +checkServerStatus(): void
    {method} +broadcastNextDecision(): void
    {method} +evaluateVotes(): int
    {method} +addVote(): void
  }

  class "ModeratorClientExchange" as mcei <<interface>>{
    {field} +websocket:WebSocket
    {method} +ModeratorClientExchange()
    {method} +getCurrentPollEval(): int
    {method} +makeJSON()
  }
  
  StoryEvent "n" - -* "1" StoryGraph
  StoryGraph - - mf
  StoryGraph - - Character
  Character "1" *- - "n" Skill
  mf - - pe
  pe - - mcei
}

package "Server" {
   class "API" as api {
        {field} +observerCollection
        {method} +registerObserver(observer, cookie)
        {method} +unregisterObserver(observer)
        {method} +notifyObservers()
        {method} +updatePossibleDecisions()
        {method} +collectVotes()
  }
  package "Backend" <<Rectangle>>{
    class "ServerShell" as ss {
      {field} +Logger: Logger
      {field} +port: int
      {field} +runShell: boolean
      {field} +serverShell: ServerShell
      {field} +capacity: int
      {field} +bufferedReader: BufferedReader
      {method} +ServerShell()
      {method} +startShell(): void
      {method} +stopShell(): void
      {method} +parseCommand(String): void
      {method} +showHelp(): void
      {method} +configPort(): void
      {method} +configCapacity(): void
      {method} +startServer(): void
      {method} +stopServer(): void
      {method} +main(String[]): void
    }

    class "ClientManager" as cm {
      {field} +webSocket: WebSocket
      {field} +ip
      {field} +port
      {field} +Logger: Logger
      {method} +ClientManager(session: Session): void
      {method} +disconnect(): void
      {method} +onDisconnect(): void
      {method} +recieve(String): void
      {method} +checkJSON(String): void
      {method} +sendMessage(String): void
      {method} +send(String): void
      {method} +recieve(String): void
    }    

    class "MainServerLogic" as msl {
      {field} +moderator: WebClient
      {field} +Logger: Logger
      {method} MainServerLogic(capacity: int, port: int)
      {method} +onFalseMessage(String): void
      {method} +onVotingMessage(String): void

    }

    class "ServerLogger" as sl {
      {field} +GlobalLogger: Logger
      {field} +logFile: FileHandler
      {field} +isSetup: Boolean
      {field} +consoleHandler: Handler
      {method} +setup(): void
      {method} +addHandler(Logger): void
      {method} +setLevel(Level): void
      {method} +setConsoleOutput(boolean): void
    }
  }
  package "PlayerAudience Client" <<Rectangle>>{  
    class "PlayerAudienceClientExchange" as pace <<Observer>>{
      {field} +sessionCookie: Cookie
      {field} +hasVoted: boolean
      {field} +selectedDecision: StoryEvent
      {field} +possibleDecisions: StoryEvent[]
      {method} +update()
      {method} +sendSelectedDecision(): StoryEvent 
    }

    class "PlayerAudienceView" as pav {
      {method} +PlayerAudienceView()
    }
  }
  ss - - msl
  msl - cm
  msl -left- api
  sl ... cm
  sl ... msl
  sl ... api
  sl ... ss
  pace - pav
  api "1" <-up- "n" pace : observes
}

mcei - cm
@enduml

PlantUML version 1.2020.20beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>