<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1165px" preserveAspectRatio="none" style="width:876px;height:1165px;" version="1.1" viewBox="0 0 876 1165" width="876px" zoomAndPan="magnify"><defs><filter height="300%" id="fq3pcwfpz7nj5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c047474403e650c4d4572c8d29a316f1]
cluster Moderator Client--><polygon fill="#FFFFFF" filter="url(#fq3pcwfpz7nj5)" points="16,6,159,6,166,28.2969,471,28.2969,471,762,16,762,16,6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="166" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="20" y="20.9951">Moderator Client</text><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><polygon fill="#FFFFFF" filter="url(#fq3pcwfpz7nj5)" points="199,786,256,786,263,808.2969,854,808.2969,854,1153,199,1153,199,786" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="199" x2="263" y1="808.2969" y2="808.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="203" y="800.9951">Server</text><!--MD5=[67adde4c5db0467fcf0b97b7ce37e86c]
cluster PlayerAudience Client--><polygon fill="#FFFFFF" filter="url(#fq3pcwfpz7nj5)" points="528,446,709,446,716,468.2969,854,468.2969,854,758.5,528,758.5,528,446" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="528" x2="716" y1="468.2969" y2="468.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="532" y="460.9951">PlayerAudience Client</text><!--MD5=[3eaf92687768346c8d614b6fd2c22fb9]
class StoryEvent--><rect codeLine="5" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="124.8281" id="StoryEvent" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="124.5" y="41"/><ellipse cx="206.25" cy="57" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M208.5938,52.6719 C207.6563,52.2344 207.0625,52.0938 206.1875,52.0938 C203.5625,52.0938 201.5625,54.1719 201.5625,56.8906 L201.5625,58.0156 C201.5625,60.5938 203.6719,62.4844 206.5625,62.4844 C207.7813,62.4844 208.9375,62.1875 209.6875,61.6406 C210.2656,61.2344 210.5938,60.7813 210.5938,60.3906 C210.5938,59.9375 210.2031,59.5469 209.7344,59.5469 C209.5156,59.5469 209.3125,59.625 209.125,59.8125 C208.6719,60.2969 208.6719,60.2969 208.4844,60.3906 C208.0625,60.6563 207.375,60.7813 206.6094,60.7813 C204.5625,60.7813 203.2656,59.6875 203.2656,57.9844 L203.2656,56.8906 C203.2656,55.1094 204.5156,53.7969 206.25,53.7969 C206.8281,53.7969 207.4375,53.9531 207.9063,54.2031 C208.3906,54.4844 208.5625,54.7031 208.6563,55.1094 C208.7188,55.5156 208.75,55.6406 208.8906,55.7656 C209.0313,55.9063 209.2656,56.0156 209.4844,56.0156 C209.75,56.0156 210.0156,55.875 210.1875,55.6563 C210.2969,55.5 210.3281,55.3125 210.3281,54.8906 L210.3281,53.4688 C210.3281,53.0313 210.3125,52.9063 210.2188,52.75 C210.0625,52.4844 209.7813,52.3438 209.4844,52.3438 C209.1875,52.3438 208.9844,52.4375 208.7656,52.75 L208.5938,52.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="226.75" y="61.1543">StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="125.5" x2="360.5" y1="73" y2="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="130.5" y="87.2104">+eventId: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="130.5" y="100.0151">+description: String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="130.5" y="112.8198">+parent: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="130.5" y="125.6245">+children: StoryEvent[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="125.5" x2="360.5" y1="132.2188" y2="132.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="130.5" y="146.4292">+StoryEvent(parent: StoryEvent, id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="130.5" y="159.2339">+addChild(): void</text><!--MD5=[efd5ebcc74ce0165d13c1df9fdb2b1d2]
class StoryGraph--><rect codeLine="14" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="176.0469" id="StoryGraph" style="stroke: #A80036; stroke-width: 1.5;" width="322" x="82" y="226"/><ellipse cx="204.75" cy="242" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M207.0938,237.6719 C206.1563,237.2344 205.5625,237.0938 204.6875,237.0938 C202.0625,237.0938 200.0625,239.1719 200.0625,241.8906 L200.0625,243.0156 C200.0625,245.5938 202.1719,247.4844 205.0625,247.4844 C206.2813,247.4844 207.4375,247.1875 208.1875,246.6406 C208.7656,246.2344 209.0938,245.7813 209.0938,245.3906 C209.0938,244.9375 208.7031,244.5469 208.2344,244.5469 C208.0156,244.5469 207.8125,244.625 207.625,244.8125 C207.1719,245.2969 207.1719,245.2969 206.9844,245.3906 C206.5625,245.6563 205.875,245.7813 205.1094,245.7813 C203.0625,245.7813 201.7656,244.6875 201.7656,242.9844 L201.7656,241.8906 C201.7656,240.1094 203.0156,238.7969 204.75,238.7969 C205.3281,238.7969 205.9375,238.9531 206.4063,239.2031 C206.8906,239.4844 207.0625,239.7031 207.1563,240.1094 C207.2188,240.5156 207.25,240.6406 207.3906,240.7656 C207.5313,240.9063 207.7656,241.0156 207.9844,241.0156 C208.25,241.0156 208.5156,240.875 208.6875,240.6563 C208.7969,240.5 208.8281,240.3125 208.8281,239.8906 L208.8281,238.4688 C208.8281,238.0313 208.8125,237.9063 208.7188,237.75 C208.5625,237.4844 208.2813,237.3438 207.9844,237.3438 C207.6875,237.3438 207.4844,237.4375 207.2656,237.75 L207.0938,237.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="225.25" y="246.1543">StoryGraph</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="83" x2="403" y1="258" y2="258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="88" y="272.2104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="88" y="285.0151">+character: Character</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="88" y="297.8198">+root: StoryEvent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="88" y="310.6245">+currentEvent: StoryEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="83" x2="403" y1="317.2188" y2="317.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="88" y="331.4292">+StoryGraph(id: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="88" y="344.2339">+loadGraphFromFile(): Graph</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="88" y="357.0386">+saveGraphToFile(): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="88" y="369.8433">+getNextPossibleEvent(): StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="310" x="88" y="382.6479">+setCurrentEvent(newCurrentEvent: StoryEvent): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="88" y="395.4526">+getNextStoryEventById(id: int): StoryEvent</text><!--MD5=[42e1add689e888dd7b55d3ee3f1dd6d7]
class Skill--><rect codeLine="27" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="124.8281" id="Skill" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="32" y="621"/><ellipse cx="116.75" cy="637" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M119.0938,632.6719 C118.1563,632.2344 117.5625,632.0938 116.6875,632.0938 C114.0625,632.0938 112.0625,634.1719 112.0625,636.8906 L112.0625,638.0156 C112.0625,640.5938 114.1719,642.4844 117.0625,642.4844 C118.2813,642.4844 119.4375,642.1875 120.1875,641.6406 C120.7656,641.2344 121.0938,640.7813 121.0938,640.3906 C121.0938,639.9375 120.7031,639.5469 120.2344,639.5469 C120.0156,639.5469 119.8125,639.625 119.625,639.8125 C119.1719,640.2969 119.1719,640.2969 118.9844,640.3906 C118.5625,640.6563 117.875,640.7813 117.1094,640.7813 C115.0625,640.7813 113.7656,639.6875 113.7656,637.9844 L113.7656,636.8906 C113.7656,635.1094 115.0156,633.7969 116.75,633.7969 C117.3281,633.7969 117.9375,633.9531 118.4063,634.2031 C118.8906,634.4844 119.0625,634.7031 119.1563,635.1094 C119.2188,635.5156 119.25,635.6406 119.3906,635.7656 C119.5313,635.9063 119.7656,636.0156 119.9844,636.0156 C120.25,636.0156 120.5156,635.875 120.6875,635.6563 C120.7969,635.5 120.8281,635.3125 120.8281,634.8906 L120.8281,633.4688 C120.8281,633.0313 120.8125,632.9063 120.7188,632.75 C120.5625,632.4844 120.2813,632.3438 119.9844,632.3438 C119.6875,632.3438 119.4844,632.4375 119.2656,632.75 L119.0938,632.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="137.25" y="641.1543">Skill</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="33" x2="233" y1="653" y2="653"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="38" y="667.2104">+id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="38" y="680.0151">+value: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="38" y="692.8198">+description: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="33" x2="233" y1="699.4141" y2="699.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="38" y="713.6245">+Skill(id: int, val: int, desc: String)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="38" y="726.4292">+setValue(val: int): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="38" y="739.2339">+getValue(): int</text><!--MD5=[3eff9d4279c887ef9286477750bdaaff]
class Character--><rect codeLine="36" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="99.2188" id="Character" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="93.5" y="462"/><ellipse cx="115.25" cy="478" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M117.5938,473.6719 C116.6563,473.2344 116.0625,473.0938 115.1875,473.0938 C112.5625,473.0938 110.5625,475.1719 110.5625,477.8906 L110.5625,479.0156 C110.5625,481.5938 112.6719,483.4844 115.5625,483.4844 C116.7813,483.4844 117.9375,483.1875 118.6875,482.6406 C119.2656,482.2344 119.5938,481.7813 119.5938,481.3906 C119.5938,480.9375 119.2031,480.5469 118.7344,480.5469 C118.5156,480.5469 118.3125,480.625 118.125,480.8125 C117.6719,481.2969 117.6719,481.2969 117.4844,481.3906 C117.0625,481.6563 116.375,481.7813 115.6094,481.7813 C113.5625,481.7813 112.2656,480.6875 112.2656,478.9844 L112.2656,477.8906 C112.2656,476.1094 113.5156,474.7969 115.25,474.7969 C115.8281,474.7969 116.4375,474.9531 116.9063,475.2031 C117.3906,475.4844 117.5625,475.7031 117.6563,476.1094 C117.7188,476.5156 117.75,476.6406 117.8906,476.7656 C118.0313,476.9063 118.2656,477.0156 118.4844,477.0156 C118.75,477.0156 119.0156,476.875 119.1875,476.6563 C119.2969,476.5 119.3281,476.3125 119.3281,475.8906 L119.3281,474.4688 C119.3281,474.0313 119.3125,473.9063 119.2188,473.75 C119.0625,473.4844 118.7813,473.3438 118.4844,473.3438 C118.1875,473.3438 117.9844,473.4375 117.7656,473.75 L117.5938,473.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="130.75" y="482.1543">Character</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="94.5" x2="197.5" y1="494" y2="494"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="99.5" y="508.2104">+sprite: Texture</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="99.5" y="521.0151">+abilities: Skill[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="99.5" y="533.8198">+name: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="94.5" x2="197.5" y1="540.4141" y2="540.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="99.5" y="554.6245">+Character()</text><!--MD5=[fb75c4f32e7cb9c950023ed84e06c4be]
class ModeratorView--><rect codeLine="43" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="99.2188" id="ModeratorView" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="260" y="462"/><ellipse cx="299.3" cy="478" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M301.6438,473.6719 C300.7063,473.2344 300.1125,473.0938 299.2375,473.0938 C296.6125,473.0938 294.6125,475.1719 294.6125,477.8906 L294.6125,479.0156 C294.6125,481.5938 296.7219,483.4844 299.6125,483.4844 C300.8313,483.4844 301.9875,483.1875 302.7375,482.6406 C303.3156,482.2344 303.6438,481.7813 303.6438,481.3906 C303.6438,480.9375 303.2531,480.5469 302.7844,480.5469 C302.5656,480.5469 302.3625,480.625 302.175,480.8125 C301.7219,481.2969 301.7219,481.2969 301.5344,481.3906 C301.1125,481.6563 300.425,481.7813 299.6594,481.7813 C297.6125,481.7813 296.3156,480.6875 296.3156,478.9844 L296.3156,477.8906 C296.3156,476.1094 297.5656,474.7969 299.3,474.7969 C299.8781,474.7969 300.4875,474.9531 300.9563,475.2031 C301.4406,475.4844 301.6125,475.7031 301.7063,476.1094 C301.7688,476.5156 301.8,476.6406 301.9406,476.7656 C302.0813,476.9063 302.3156,477.0156 302.5344,477.0156 C302.8,477.0156 303.0656,476.875 303.2375,476.6563 C303.3469,476.5 303.3781,476.3125 303.3781,475.8906 L303.3781,474.4688 C303.3781,474.0313 303.3625,473.9063 303.2688,473.75 C303.1125,473.4844 302.8313,473.3438 302.5344,473.3438 C302.2375,473.3438 302.0344,473.4375 301.8156,473.75 L301.6438,473.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="318.7" y="482.1543">ModeratorView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="261" x2="437" y1="494" y2="494"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="266" y="508.2104">+timeoutDuration: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="261" x2="437" y1="514.8047" y2="514.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="266" y="529.0151">+ModeratorView()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="266" y="541.8198">+pausePolling(Boolean): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="266" y="554.6245">+checkServerStatus(): void</text><!--MD5=[aef0d3d3c8a893455b9107cd4a3b357c]
class mcei--><rect codeLine="50" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="105.1563" id="mcei" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="269" y="631"/><ellipse cx="284" cy="649.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M286.3438,645.6406 C285.4063,645.2031 284.8125,645.0625 283.9375,645.0625 C281.3125,645.0625 279.3125,647.1406 279.3125,649.8594 L279.3125,650.9844 C279.3125,653.5625 281.4219,655.4531 284.3125,655.4531 C285.5313,655.4531 286.6875,655.1563 287.4375,654.6094 C288.0156,654.2031 288.3438,653.75 288.3438,653.3594 C288.3438,652.9063 287.9531,652.5156 287.4844,652.5156 C287.2656,652.5156 287.0625,652.5938 286.875,652.7813 C286.4219,653.2656 286.4219,653.2656 286.2344,653.3594 C285.8125,653.625 285.125,653.75 284.3594,653.75 C282.3125,653.75 281.0156,652.6563 281.0156,650.9531 L281.0156,649.8594 C281.0156,648.0781 282.2656,646.7656 284,646.7656 C284.5781,646.7656 285.1875,646.9219 285.6563,647.1719 C286.1406,647.4531 286.3125,647.6719 286.4063,648.0781 C286.4688,648.4844 286.5,648.6094 286.6406,648.7344 C286.7813,648.875 287.0156,648.9844 287.2344,648.9844 C287.5,648.9844 287.7656,648.8438 287.9375,648.625 C288.0469,648.4688 288.0781,648.2813 288.0781,647.8594 L288.0781,646.4375 C288.0781,646 288.0625,645.875 287.9688,645.7188 C287.8125,645.4531 287.5313,645.3125 287.2344,645.3125 C286.9375,645.3125 286.7344,645.4063 286.5156,645.7188 L286.3438,645.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="341.5" y="647.1387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="298" y="661.1074">ModeratorClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="454" y1="668.9375" y2="668.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="275" y="683.1479">+websocket:WebSocket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="454" y1="689.7422" y2="689.7422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="275" y="703.9526">+ModeratorClientExchange()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="275" y="716.7573">+getCurrentPollEval(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="275" y="729.562">+makeJSON()</text><!--MD5=[064a8f12a36823b1bb56e2c184dd9205]
class smei--><rect codeLine="60" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="117.9609" id="smei" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="215" y="821"/><ellipse cx="276.75" cy="839.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M279.0938,835.6406 C278.1563,835.2031 277.5625,835.0625 276.6875,835.0625 C274.0625,835.0625 272.0625,837.1406 272.0625,839.8594 L272.0625,840.9844 C272.0625,843.5625 274.1719,845.4531 277.0625,845.4531 C278.2813,845.4531 279.4375,845.1563 280.1875,844.6094 C280.7656,844.2031 281.0938,843.75 281.0938,843.3594 C281.0938,842.9063 280.7031,842.5156 280.2344,842.5156 C280.0156,842.5156 279.8125,842.5938 279.625,842.7813 C279.1719,843.2656 279.1719,843.2656 278.9844,843.3594 C278.5625,843.625 277.875,843.75 277.1094,843.75 C275.0625,843.75 273.7656,842.6563 273.7656,840.9531 L273.7656,839.8594 C273.7656,838.0781 275.0156,836.7656 276.75,836.7656 C277.3281,836.7656 277.9375,836.9219 278.4063,837.1719 C278.8906,837.4531 279.0625,837.6719 279.1563,838.0781 C279.2188,838.4844 279.25,838.6094 279.3906,838.7344 C279.5313,838.875 279.7656,838.9844 279.9844,838.9844 C280.25,838.9844 280.5156,838.8438 280.6875,838.625 C280.7969,838.4688 280.8281,838.2813 280.8281,837.8594 L280.8281,836.4375 C280.8281,836 280.8125,835.875 280.7188,835.7188 C280.5625,835.4531 280.2813,835.3125 279.9844,835.3125 C279.6875,835.3125 279.4844,835.4063 279.2656,835.7188 L279.0938,835.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="344.75" y="837.1387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="297.25" y="851.1074">ServerModeratorExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="216" x2="508" y1="858.9375" y2="858.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="221" y="873.1479">+websocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="221" y="885.9526">+ip: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="221" y="898.7573">+port: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="216" x2="508" y1="905.3516" y2="905.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="221" y="919.562">+ServerModeratorExchange(ip: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="221" y="932.3667">+requestCurrentPossibleDecisions(): StoryEvent[]</text><!--MD5=[100204db4219f2c470ad9f3e6fcca0f4]
class spaei--><rect codeLine="68" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="117.9609" id="spaei" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="544" y="821"/><ellipse cx="591.25" cy="839.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M593.5938,835.6406 C592.6563,835.2031 592.0625,835.0625 591.1875,835.0625 C588.5625,835.0625 586.5625,837.1406 586.5625,839.8594 L586.5625,840.9844 C586.5625,843.5625 588.6719,845.4531 591.5625,845.4531 C592.7813,845.4531 593.9375,845.1563 594.6875,844.6094 C595.2656,844.2031 595.5938,843.75 595.5938,843.3594 C595.5938,842.9063 595.2031,842.5156 594.7344,842.5156 C594.5156,842.5156 594.3125,842.5938 594.125,842.7813 C593.6719,843.2656 593.6719,843.2656 593.4844,843.3594 C593.0625,843.625 592.375,843.75 591.6094,843.75 C589.5625,843.75 588.2656,842.6563 588.2656,840.9531 L588.2656,839.8594 C588.2656,838.0781 589.5156,836.7656 591.25,836.7656 C591.8281,836.7656 592.4375,836.9219 592.9063,837.1719 C593.3906,837.4531 593.5625,837.6719 593.6563,838.0781 C593.7188,838.4844 593.75,838.6094 593.8906,838.7344 C594.0313,838.875 594.2656,838.9844 594.4844,838.9844 C594.75,838.9844 595.0156,838.8438 595.1875,838.625 C595.2969,838.4688 595.3281,838.2813 595.3281,837.8594 L595.3281,836.4375 C595.3281,836 595.3125,835.875 595.2188,835.7188 C595.0625,835.4531 594.7813,835.3125 594.4844,835.3125 C594.1875,835.3125 593.9844,835.4063 593.7656,835.7188 L593.5938,835.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="673.75" y="837.1387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="191" x="611.75" y="851.1074">ServerPlayerAudienceExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="545" x2="837" y1="858.9375" y2="858.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="550" y="873.1479">+websocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="550" y="885.9526">+ip: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="550" y="898.7573">+port: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="545" x2="837" y1="905.3516" y2="905.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="550" y="919.562">+ServerPlayerAudienceExchange(ip: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="550" y="932.3667">+requestDecision(): int</text><!--MD5=[9105e509a9f69a1dfba1c0054edeb4e1]
class pe--><rect codeLine="76" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="137.6328" id="pe" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="430" y="999"/><ellipse cx="484.25" cy="1015" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M486.5938,1010.6719 C485.6563,1010.2344 485.0625,1010.0938 484.1875,1010.0938 C481.5625,1010.0938 479.5625,1012.1719 479.5625,1014.8906 L479.5625,1016.0156 C479.5625,1018.5938 481.6719,1020.4844 484.5625,1020.4844 C485.7813,1020.4844 486.9375,1020.1875 487.6875,1019.6406 C488.2656,1019.2344 488.5938,1018.7813 488.5938,1018.3906 C488.5938,1017.9375 488.2031,1017.5469 487.7344,1017.5469 C487.5156,1017.5469 487.3125,1017.625 487.125,1017.8125 C486.6719,1018.2969 486.6719,1018.2969 486.4844,1018.3906 C486.0625,1018.6563 485.375,1018.7813 484.6094,1018.7813 C482.5625,1018.7813 481.2656,1017.6875 481.2656,1015.9844 L481.2656,1014.8906 C481.2656,1013.1094 482.5156,1011.7969 484.25,1011.7969 C484.8281,1011.7969 485.4375,1011.9531 485.9063,1012.2031 C486.3906,1012.4844 486.5625,1012.7031 486.6563,1013.1094 C486.7188,1013.5156 486.75,1013.6406 486.8906,1013.7656 C487.0313,1013.9063 487.2656,1014.0156 487.4844,1014.0156 C487.75,1014.0156 488.0156,1013.875 488.1875,1013.6563 C488.2969,1013.5 488.3281,1013.3125 488.3281,1012.8906 L488.3281,1011.4688 C488.3281,1011.0313 488.3125,1010.9063 488.2188,1010.75 C488.0625,1010.4844 487.7813,1010.3438 487.4844,1010.3438 C487.1875,1010.3438 486.9844,1010.4375 486.7656,1010.75 L486.5938,1010.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="504.75" y="1019.1543">PollEvaluator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="431" x2="621" y1="1031" y2="1031"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="436" y="1045.2104">possibleDecisions: StoryEvent[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="436" y="1058.0151">timeout: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="436" y="1070.8198">voteCounter: int[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="431" x2="621" y1="1077.4141" y2="1077.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="436" y="1091.6245">PollEvaluator()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="436" y="1104.4292">pauseTimer(Boolean): void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="436" y="1117.2339">evaluateVotes(): int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="436" y="1130.0386">addVote(): void</text><!--MD5=[c2661feeee78a634963d3f7d06330ae5]
class pacei--><rect codeLine="91" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="117.9609" id="pacei" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="544" y="624.5"/><ellipse cx="595.25" cy="643.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M597.5938,639.1406 C596.6563,638.7031 596.0625,638.5625 595.1875,638.5625 C592.5625,638.5625 590.5625,640.6406 590.5625,643.3594 L590.5625,644.4844 C590.5625,647.0625 592.6719,648.9531 595.5625,648.9531 C596.7813,648.9531 597.9375,648.6563 598.6875,648.1094 C599.2656,647.7031 599.5938,647.25 599.5938,646.8594 C599.5938,646.4063 599.2031,646.0156 598.7344,646.0156 C598.5156,646.0156 598.3125,646.0938 598.125,646.2813 C597.6719,646.7656 597.6719,646.7656 597.4844,646.8594 C597.0625,647.125 596.375,647.25 595.6094,647.25 C593.5625,647.25 592.2656,646.1563 592.2656,644.4531 L592.2656,643.3594 C592.2656,641.5781 593.5156,640.2656 595.25,640.2656 C595.8281,640.2656 596.4375,640.4219 596.9063,640.6719 C597.3906,640.9531 597.5625,641.1719 597.6563,641.5781 C597.7188,641.9844 597.75,642.1094 597.8906,642.2344 C598.0313,642.375 598.2656,642.4844 598.4844,642.4844 C598.75,642.4844 599.0156,642.3438 599.1875,642.125 C599.2969,641.9688 599.3281,641.7813 599.3281,641.3594 L599.3281,639.9375 C599.3281,639.5 599.3125,639.375 599.2188,639.2188 C599.0625,638.9531 598.7813,638.8125 598.4844,638.8125 C598.1875,638.8125 597.9844,638.9063 597.7656,639.2188 L597.5938,639.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="673.75" y="640.6387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="615.75" y="654.6074">PlayerAudienceClientExchange</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="545" x2="837" y1="662.4375" y2="662.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="550" y="676.6479">+websocket: WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="550" y="689.4526">+ip: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="550" y="702.2573">+port: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="545" x2="837" y1="708.8516" y2="708.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="276" x="550" y="723.062">+PlayerAudienceClientExchange(ip: int, port: int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="550" y="735.8667">+requestCurrentPossibleDecisions(): StoryEvent[]</text><!--MD5=[046b75ba0a1981da758680c895f9ffd8]
class pav--><rect codeLine="99" fill="#FEFECE" filter="url(#fq3pcwfpz7nj5)" height="60.8047" id="pav" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="614.5" y="481"/><ellipse cx="629.5" cy="497" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M631.8438,492.6719 C630.9063,492.2344 630.3125,492.0938 629.4375,492.0938 C626.8125,492.0938 624.8125,494.1719 624.8125,496.8906 L624.8125,498.0156 C624.8125,500.5938 626.9219,502.4844 629.8125,502.4844 C631.0313,502.4844 632.1875,502.1875 632.9375,501.6406 C633.5156,501.2344 633.8438,500.7813 633.8438,500.3906 C633.8438,499.9375 633.4531,499.5469 632.9844,499.5469 C632.7656,499.5469 632.5625,499.625 632.375,499.8125 C631.9219,500.2969 631.9219,500.2969 631.7344,500.3906 C631.3125,500.6563 630.625,500.7813 629.8594,500.7813 C627.8125,500.7813 626.5156,499.6875 626.5156,497.9844 L626.5156,496.8906 C626.5156,495.1094 627.7656,493.7969 629.5,493.7969 C630.0781,493.7969 630.6875,493.9531 631.1563,494.2031 C631.6406,494.4844 631.8125,494.7031 631.9063,495.1094 C631.9688,495.5156 632,495.6406 632.1406,495.7656 C632.2813,495.9063 632.5156,496.0156 632.7344,496.0156 C633,496.0156 633.2656,495.875 633.4375,495.6563 C633.5469,495.5 633.5781,495.3125 633.5781,494.8906 L633.5781,493.4688 C633.5781,493.0313 633.5625,492.9063 633.4688,492.75 C633.3125,492.4844 633.0313,492.3438 632.7344,492.3438 C632.4375,492.3438 632.2344,492.4375 632.0156,492.75 L631.8438,492.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="643.5" y="501.1543">PlayerAudienceView</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="615.5" x2="766.5" y1="513" y2="513"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="615.5" x2="766.5" y1="521" y2="521"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="620.5" y="535.2104">+PlayerAudienceView()</text><!--MD5=[513d28559cb9b2f986fa50a4c3eda83f]
link StoryEvent to StoryGraph--><path codeLine="105" d="M243,166.21 C243,180.846 243,196.83 243,212.693 " fill="none" id="StoryEvent-to-StoryGraph" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="243,225.957,247,219.957,243,213.957,239,219.957,243,225.957" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="234.5625" y="185.9728">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="234.6563" y="214.8169">1</text><!--MD5=[cad85a1f3cc8deeb58fddb940804cf73]
link StoryGraph to ModeratorView--><path codeLine="106" d="M290.265,402.172 C301.362,422.639 312.798,443.731 322.597,461.804 " fill="none" id="StoryGraph-ModeratorView" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f80b4c689c2fbad67007e34e43864d26]
link StoryGraph to Character--><path codeLine="107" d="M199.748,402.172 C189.593,422.639 179.128,443.731 170.161,461.804 " fill="none" id="StoryGraph-Character" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b16aa1dee279ab3d1d003602504b70d]
reverse link Character to Skill--><path codeLine="108" d="M141.282,574.202 C140.123,589.355 138.882,605.579 137.723,620.734 " fill="none" id="Character-backto-Skill" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="142.275,561.215,137.829,566.8925,141.3598,573.18,145.8057,567.5026,142.275,561.215" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="133.1887" y="581.3217">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129.8021" y="610.1322">n</text><!--MD5=[80e712fb8e5e18bfabc151d875f0b85c]
link ModeratorView to mcei--><path codeLine="109" d="M352.725,561.215 C354.391,582.997 356.356,608.691 358.047,630.811 " fill="none" id="ModeratorView-mcei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0deb29d22e67104b1b1ed7748057835c]
link smei to pe--><path codeLine="110" d="M413.216,939.086 C429.945,958.06 448.674,979.301 465.99,998.94 " fill="none" id="smei-pe" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59f81a6773025d802accd063ae87096c]
link spaei to pe--><path codeLine="111" d="M639.472,939.086 C622.641,958.06 603.798,979.301 586.376,998.94 " fill="none" id="spaei-pe" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[be6476f3a91ce03f2764f8ef05941fdb]
link pav to pacei--><path codeLine="112" d="M691,542.112 C691,564.752 691,596.679 691,624.367 " fill="none" id="pav-pacei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[348f1646cf919580628ecf3fddbead9f]
link mcei to smei--><path codeLine="113" d="M362,736.112 C362,762.222 362,794.007 362,820.965 " fill="none" id="mcei-smei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[662654b1b8bc18ba930906cb679f0044]
link pacei to spaei--><path codeLine="114" d="M691,742.593 C691,767.331 691,796.128 691,820.871 " fill="none" id="pacei-spaei" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3a6f5592eab393bab04989dfb939b51d]
@startuml
skinparam classAttributeIconSize 0

package "Moderator Client" {

  class StoryEvent {
    {field} +eventId: int
    {field} +description: String
    {field} +parent: StoryEvent
    {field} +children: StoryEvent[]
    {method} +StoryEvent(parent: StoryEvent, id: int)
    {method} +addChild(): void
  }

  class StoryGraph {
    {field} +id: int
    {field} +character: Character
    {field} +root: StoryEvent
    {field} +currentEvent: StoryEvent
    {method} +StoryGraph(id: int)
    {method} +loadGraphFromFile(): Graph
    {method} +saveGraphToFile(): void
    {method} +getNextPossibleEvent(): StoryEvent[]
    {method} +setCurrentEvent(newCurrentEvent: StoryEvent): void
    {method} +getNextStoryEventById(id: int): StoryEvent
  }

  class Skill {
    {field} +id: int
    {field} +value: int
    {field} +description: String
    {method} + Skill(id: int, val: int, desc: String)
    {method} + setValue(val: int): void
    {method} + getValue(): int
  }

  class Character {
    {field} +sprite: Texture
    {field} +abilities: Skill[]
    {field} +name: String
    {method} +Character()
  }

  class ModeratorView {
    {field} +timeoutDuration: int
    {method} +ModeratorView()
    {method} +pausePolling(Boolean): void
    {method} +checkServerStatus(): void
  }

  class "ModeratorClientExchange" as mcei <<interface>>{
    {field} +websocket:WebSocket
    {method} +ModeratorClientExchange()
    {method} +getCurrentPollEval(): int
    {method} +makeJSON()
  }
}

package "Server" {

  class "ServerModeratorExchange" as smei <<interface>>{
    {field} +websocket: WebSocket
    {field} +ip: int
    {field} +port: int
    {method} +ServerModeratorExchange(ip: int, port: int)
    {method} +requestCurrentPossibleDecisions(): StoryEvent[]
  }

  class "ServerPlayerAudienceExchange" as spaei <<interface>>{
    {field} +websocket: WebSocket
    {field} +ip: int
    {field} +port: int
    {method} +ServerPlayerAudienceExchange(ip: int, port: int)
    {method} +requestDecision(): int
  }

  class "PollEvaluator" as pe {

    {field} possibleDecisions: StoryEvent[]
    {field} timeout: int
    {field} voteCounter: int[]
    {method} PollEvaluator()
    {method} pauseTimer(Boolean): void
    {method} evaluateVotes(): int
    {method} addVote(): void
  }
}


package "PlayerAudience Client"{

  class "PlayerAudienceClientExchange" as pacei <<interface>>{
    {field} +websocket: WebSocket
    {field} +ip: int
    {field} +port: int
    {method} +PlayerAudienceClientExchange(ip: int, port: int)
    {method} +requestCurrentPossibleDecisions(): StoryEvent[]
  }

  class "PlayerAudienceView" as pav {
    {method} +PlayerAudienceView()
  }

}

StoryEvent "n" - -* "1" StoryGraph
StoryGraph - - ModeratorView
StoryGraph - - Character
Character "1" *- - "n" Skill
ModeratorView - - mcei
smei - - pe
spaei - - pe
pacei -up- pav
mcei - - smei
pacei - - spaei
@enduml

PlantUML version 1.2020.18beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>